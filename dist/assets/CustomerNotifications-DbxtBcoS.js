import{j as e}from"./ui-CMGlPv8M.js";import{d as k,r as g}from"./router-02yfTqxa.js";import{a$ as C,av as h,J as _,I as S,r as T,s as D,v as A,w as M,x as l,f as n,a as E,e as I,ac as $,ad as R,ae as V,af as o,E as z,ay as B,B as L,b0 as F}from"./index-DGiQKbnC.js";import{C as u,A as P}from"./check-check-BZ-OxMqH.js";import{E as U}from"./ellipsis-vertical-BahDdS2u.js";import{T as J}from"./trash-2-DzllJ_4S.js";import"./vendor-Dazix4UH.js";const W=()=>{const{notifications:c,markAsRead:d,clearNotifications:j}=C(),a=k(),[i,b]=g.useState("all"),[t,N]=g.useState(""),w=s=>({property_alert:"ðŸ ",price_alert:"ðŸ’°",new_message:"ðŸ’¬",property_update:"ðŸ“‹",service_update:"ðŸ”§",news_update:"ðŸ“°",broadcast:"ðŸ“¢",announcement:"ðŸ“£",welcome:"ðŸ‘‹",test:"ðŸ§ª"})[s]||"ðŸ””",y=s=>({property_alert:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",price_alert:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",new_message:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",property_update:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",service_update:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",news_update:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",broadcast:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",announcement:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",welcome:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",test:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"})[s]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",v=s=>{try{return F(new Date(s),{addSuffix:!0})}catch{return"Unknown time"}},m=s=>{if(d(s.timestamp),s.data?.action)switch(s.data.action){case"view_property":s.data.propertyId&&a(`/customer/property/${s.data.propertyId}`);break;case"view_properties":a("/customer/search");break;case"view_messages":a("/customer/messages");break;case"view_dashboard":a("/customer/dashboard");break;case"view_favorites":a("/customer/favorites");break;case"view_services":a("/customer/services");break}},x=c.filter(s=>{const r=i==="all"||i==="unread"&&!s.read||s.type===i,f=!t||s.title.toLowerCase().includes(t.toLowerCase())||s.message.toLowerCase().includes(t.toLowerCase());return r&&f}),p=c.filter(s=>!s.read).length;return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(h,{className:"w-8 h-8 text-primary"}),"Notifications"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Stay updated with property alerts, messages, and important updates"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(S,{type:"text",placeholder:"Search notifications...",value:t,onChange:s=>N(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(T,{value:i,onValueChange:s=>b(s),children:[e.jsx(D,{className:"w-40",children:e.jsx(A,{placeholder:"Filter"})}),e.jsxs(M,{children:[e.jsx(l,{value:"all",children:"All Notifications"}),e.jsxs(l,{value:"unread",children:["Unread (",p,")"]}),e.jsx(l,{value:"property_alert",children:"Property Alerts"}),e.jsx(l,{value:"price_alert",children:"Price Alerts"}),e.jsx(l,{value:"new_message",children:"Messages"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{c.forEach(s=>d(s.timestamp))},disabled:p===0,children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Mark All Read"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:j,disabled:c.length===0,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),e.jsx(E,{children:e.jsx(I,{className:"p-0",children:x.length===0?e.jsxs("div",{className:"text-center py-12 px-4 text-muted-foreground",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:t?"No matching notifications":"No notifications yet"}),e.jsx("p",{className:"text-sm",children:t?"Try adjusting your search or filter settings":"You'll see updates about properties, messages, and more here"})]}):e.jsx("div",{className:"divide-y",children:x.map((s,r)=>e.jsx("div",{className:`p-4 transition-all duration-200 hover:bg-muted/50 ${s.read?"opacity-70":"bg-background"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-2xl mt-1",children:w(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[s.title,!s.read&&e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message})]}),e.jsxs($,{children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(U,{className:"w-4 h-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(o,{onClick:()=>m(s),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(o,{onClick:()=>d(s.timestamp),children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),e.jsx(B,{}),e.jsxs(o,{className:"text-red-600",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"secondary",className:`text-xs ${y(s.type)}`,children:s.type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:v(s.timestamp)})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>m(s),className:"text-xs h-7",children:"View"})]})]})]})},`${s.timestamp}-${r}`))})})})]})};export{W as default};
