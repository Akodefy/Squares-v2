import{j as e}from"./ui-CMGlPv8M.js";import{e as x,d as j,r as o}from"./router-02yfTqxa.js";import{a1 as v,f as u,D as g,a as f,b as C,c as y,e as b,L as i,I as r,r as N,s as S,v as D,w as F,x as m}from"./index-DGiQKbnC.js";import{s as E}from"./subscriptionService-7xDyID82.js";import"./vendor-Dazix4UH.js";const A=()=>{const{id:l}=x(),n=j(),{toast:c}=v(),[s,t]=o.useState(null),[q,h]=o.useState(!0);o.useEffect(()=>{(async()=>{if(l)try{h(!0);const d=await E.getSubscription(l);t(d.data.subscription)}catch(d){console.error("Failed to fetch subscription:",d),c({title:"Error",description:"Failed to load client data.",variant:"destructive"}),n("/admin/clients")}finally{h(!1)}})()},[l,n,c]);const p=a=>{a.preventDefault(),c({title:"Client updated",description:"The client details have been updated successfully."}),n("/clients")};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>n("/clients"),children:e.jsx(g,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Client"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Update client subscription details"})]})]}),e.jsxs(f,{children:[e.jsx(C,{children:e.jsx(y,{children:"Client Information"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Client Name"}),e.jsx(r,{id:"name",value:s.user?.name||"",onChange:a=>t({...s,user:{...s.user,name:a.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:s.user?.email||"",onChange:a=>t({...s,user:{...s.user,email:a.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"planName",children:"Plan"}),e.jsx(r,{id:"planName",value:s.plan?.name||"",onChange:a=>t({...s,plan:{...s.plan,name:a.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"amount",children:"Amount"}),e.jsx(r,{id:"amount",type:"number",step:"0.01",value:s.amount,onChange:a=>t({...s,amount:parseFloat(a.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"subscriptionDate",children:"Subscription Date"}),e.jsx(r,{id:"subscriptionDate",type:"date",value:s.startDate?.split("T")[0]||"",onChange:a=>t({...s,startDate:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(r,{id:"expiryDate",type:"date",value:s.endDate?.split("T")[0]||"",onChange:a=>t({...s,endDate:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"status",children:"Status"}),e.jsxs(N,{value:s.status,onValueChange:a=>t({...s,status:a}),children:[e.jsx(S,{children:e.jsx(D,{})}),e.jsxs(F,{children:[e.jsx(m,{value:"active",children:"Active"}),e.jsx(m,{value:"expired",children:"Expired"}),e.jsx(m,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(u,{type:"submit",children:"Save Changes"}),e.jsx(u,{type:"button",variant:"outline",onClick:()=>n("/clients"),children:"Cancel"})]})]})})]})]}):e.jsx("div",{children:"Client not found"})};export{A as default};
