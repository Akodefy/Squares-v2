import{j as e}from"./ui-CMGlPv8M.js";import{d as y,r as d}from"./router-02yfTqxa.js";import{A as P,t as w,f as g,D as E,a as r,b as i,c as n,e as l,O as F}from"./index-DGiQKbnC.js";import{D as k}from"./download-Dx_JF_-F.js";import"./vendor-Dazix4UH.js";const B=()=>{const p=y(),[m,f]=d.useState([]),[j,u]=d.useState(!0),[o,v]=d.useState({totalFavorites:0,totalProperties:0,engagementRate:0,avgFavoritesPerProperty:0});d.useEffect(()=>{N()},[]);const N=async()=>{try{const t=P.getToken(),s=await fetch("https://api.akodefy.com/api/favorites/all",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch favorites data");const c=await s.json();if(c.success&&c.data){const{properties:h,totalFavorites:x,totalProperties:C}=c.data;f(h);const a=h.length,b=a>0?x/a*100:0;v({totalFavorites:x,totalProperties:a,engagementRate:Math.round(b*10)/10,avgFavoritesPerProperty:a>0?Math.round(x/a*10)/10:0})}}catch(t){console.error("Error fetching engagement data:",t),w({title:"Error",description:"Failed to load engagement data",variant:"destructive"})}finally{u(!1)}};return j?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(g,{variant:"ghost",onClick:()=>p("/admin/dashboard"),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Engagement Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Property engagement metrics and favorite statistics"})]}),e.jsxs(g,{variant:"outline",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(r,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.totalProperties})})]}),e.jsxs(r,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Favorites"})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:o.totalFavorites})})]}),e.jsxs(r,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Engagement Rate"})}),e.jsx(l,{children:e.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:[o.engagementRate,"%"]})})]}),e.jsxs(r,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Favorites/Property"})}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.avgFavoritesPerProperty})})]})]}),e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(n,{children:"Properties by Engagement"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:m.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No properties found"}):m.slice(0,50).map((t,s)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${s===0?"bg-yellow-100 text-yellow-700":s===1?"bg-gray-100 text-gray-700":s===2?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:s+1})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.address.locality,", ",t.address.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:t.propertyType}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.listingType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-pink-600 fill-pink-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:t.favoriteCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"favorites"})]})]})]})},t._id))})})]})]})};export{B as default};
