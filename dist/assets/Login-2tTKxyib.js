const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DGiQKbnC.js","assets/ui-CMGlPv8M.js","assets/router-02yfTqxa.js","assets/vendor-Dazix4UH.js","assets/index-Oz5Q_YaU.css"])))=>i.map(i=>d[i]);
import{u as S,N as L,L as u,I as h,E,f as _,F as I,t as g,_ as P}from"./index-DGiQKbnC.js";import{j as e}from"./ui-CMGlPv8M.js";import{d as R,u as D,r}from"./router-02yfTqxa.js";import{E as F}from"./eye-off-CFJDzV2J.js";import"./vendor-Dazix4UH.js";const O=()=>{const s=R(),p=D(),{login:x}=S(),[o,f]=r.useState(""),[n,b]=r.useState(""),[l,d]=r.useState(!1),[i,v]=r.useState(!1),c=p.state?.from?.pathname||null,j=async a=>{if(a.preventDefault(),!o||!n){g({title:"Validation Error",description:"Please enter both email and password",variant:"destructive"});return}d(!0);try{if(await x(o,n)){const t=JSON.parse(localStorage.getItem("user")||"{}");if(console.log("Login: User role detected:",t.role),t.role==="agent"){console.log("Login: Vendor attempted to login through default portal"),g({title:"Access Denied",description:"Vendors must use the vendor login portal. Redirecting...",variant:"destructive"});const{authService:N}=await P(async()=>{const{authService:w}=await import("./index-DGiQKbnC.js").then(y=>y.bu);return{authService:w}},__vite__mapDeps([0,1,2,3,4]));N.clearAuthData(),setTimeout(()=>{s("/vendor/login")},1500);return}c?s(c,{replace:!0}):t.role==="superadmin"?(console.log("Login: Redirecting superadmin to admin dashboard"),s("/admin/dashboard")):t.role==="subadmin"?(console.log("Login: Redirecting subadmin to subadmin dashboard"),s("/subadmin/dashboard")):t.role==="admin"?(console.log("Login: Redirecting admin to admin dashboard"),s("/admin/dashboard")):(console.log("Login: Redirecting customer to customer dashboard"),s("/customer/dashboard"))}}catch(m){console.error("Login error:",m)}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(L,{}),e.jsx("main",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-center text-muted-foreground mb-8",children:"Sign in to your BuildHomeMart account"}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",placeholder:"you@example.com",required:!0,value:o,onChange:a=>f(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx("a",{href:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",type:i?"text":"password",placeholder:"Enter your password",required:!0,value:n,onChange:a=>b(a.target.value),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>v(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(F,{className:"h-5 w-5"}):e.jsx(E,{className:"h-5 w-5"})})]})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:l,children:l?"Signing In...":"Sign In"})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",e.jsx("a",{href:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}),e.jsx(I,{})]})};export{O as default};
