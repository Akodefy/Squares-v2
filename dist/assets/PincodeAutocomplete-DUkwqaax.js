import{j as e}from"./ui-DHQhougw.js";import{r as s}from"./router-Bi51YGN-.js";import{s as t,W as a,X as c,Y as i,f as n,v as r,a0 as l,a1 as d,l as o}from"./index-Bu7cQZk6.js";import{C as m,a as x,c as p,d as u,e as h}from"./command-CII4kP9G.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=t("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);function j({value:t,onChange:j,state:N,district:y,city:g,placeholder:v="Select pincode...",disabled:w=!1,className:S,error:b}){const[C,$]=s.useState(!1),[k,P]=s.useState([]),[E,z]=s.useState(!1),[D,L]=s.useState(""),[O,R]=s.useState(!1);s.useEffect(()=>{(async()=>{if(o.isReady())R(!0);else{z(!0);try{await o.initialize(),R(!0)}catch(e){}finally{z(!1)}}})()},[]),s.useEffect(()=>{if(!O)return;(()=>{try{const e=o.getPincodeSuggestions(N,y,g,D);P(e)}catch(e){P([])}})()},[N,y,g,D,O]);const U=w||!O||!N&&!y&&!g;return e.jsxs("div",{className:a("relative",S),children:[e.jsxs(c,{open:C,onOpenChange:$,children:[e.jsx(i,{asChild:!0,children:e.jsxs(n,{variant:"outline",role:"combobox","aria-expanded":C,className:a("w-full justify-between",!t&&"text-muted-foreground",b&&"border-red-500"),disabled:U,children:[e.jsx("span",{className:"truncate",children:E?e.jsxs("span",{className:"flex items-center",children:[e.jsx(r,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(()=>{if(!t)return v;const e=k.find(e=>e.pincode===t);return e?`${e.pincode} - ${e.city}`:t})()}),e.jsx(f,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(l,{className:"w-full p-0",align:"start",children:e.jsxs(m,{children:[e.jsx(x,{placeholder:"Search pincode...",value:D,onValueChange:L}),e.jsx(p,{children:N||y||g?e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No pincodes found"}):e.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"Please select state, district, or city first"})}),e.jsx(u,{className:"max-h-64 overflow-auto",children:k.map(s=>e.jsxs(h,{value:s.pincode,onSelect:()=>{return j((e=s).pincode,e),$(!1),void L("");var e},children:[e.jsx(d,{className:a("mr-2 h-4 w-4",t===s.pincode?"opacity-100":"opacity-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.pincode}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.city,", ",s.district,", ",s.state]})]})]},`${s.pincode}-${s.city}`))})]})})]}),b&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b}),!N&&!y&&!g&&!b&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Select state, district, or city to see available pincodes"})]})}export{j as P};
