import{j as e}from"./ui-CMGlPv8M.js";import{h as E,r as i}from"./router-02yfTqxa.js";import{P as T,a as w}from"./PropertyCard-VJdFJFo1.js";import{J as k,I,Q as L,f as A,aH as _,t as D}from"./index-DGiQKbnC.js";import{P as Q,a as M,b as p,c as R,d as B,f as G,e as H}from"./pagination-YbYwwe1g.js";import"./vendor-Dazix4UH.js";import"./propertyUtils-DZZpAHgC.js";import"./PropertyContactDialog-BKsT45oI.js";import"./messageService-B5jDnZ0Q.js";import"./send-DxBMk8cd.js";import"./EnterprisePropertyContactDialog-HvalUWsn.js";import"./dollar-sign-CYcO9sIf.js";import"./vendorService-Ci45BOYl.js";import"./square-pqeblIaW.js";import"./ellipsis-v9J3hQEd.js";const f=12,ae=()=>{const[c]=E(),[a,o]=i.useState(1),[d,m]=i.useState(""),[h,v]=i.useState([]),[x,u]=i.useState(!0),[n,N]=i.useState(0),[P,S]=i.useState(0),[j,g]=i.useState({});i.useEffect(()=>{const s=c.get("listingType"),r=c.get("propertyType"),t=c.get("search"),l={};s&&s!=="all"&&(l.listingType=s),r&&r!=="all"&&(l.propertyType=r),t&&m(t),g(l),o(1)},[c]),i.useEffect(()=>{(async()=>{u(!0);try{const r={page:a,limit:f,search:d||void 0,...j},t=await _.getProperties(r);t.success&&(v(t.data.properties),N(t.data.pagination.totalPages),S(t.data.pagination.totalProperties))}catch(r){console.error("Failed to fetch properties:",r),D({title:"Error",description:"Failed to load properties. Please try again.",variant:"destructive"})}finally{u(!1)}})()},[a,d,j]);const C=s=>{m(s),o(1)},F=s=>{g(s),o(1)},y=(a-1)*f,b=Math.min(y+f,P);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(I,{type:"text",placeholder:"Search properties by location, type...",className:"pl-10 h-12",value:d,onChange:s=>C(s.target.value)})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:e.jsx(T,{onFilterChange:F})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Available Properties"}),e.jsx("p",{className:"text-muted-foreground",children:x?"Loading properties...":e.jsxs(e.Fragment,{children:["Showing ",y+1,"-",b," of ",P," properties"]})})]}),x?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(L,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading properties..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No properties found matching your criteria."}),e.jsx(A,{onClick:()=>{g({}),m(""),o(1)},variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6 mb-8",children:h.map(s=>e.jsx(w,{property:s},s._id))}),!x&&h.length>0&&n>1&&e.jsx(Q,{children:e.jsxs(M,{children:[e.jsx(p,{children:e.jsx(R,{href:"#",onClick:s=>{s.preventDefault(),a>1&&o(a-1)},className:a===1?"pointer-events-none opacity-50":""})}),[...Array(n)].map((s,r)=>{const t=r+1;return t===1||t===n||t>=a-1&&t<=a+1?e.jsx(p,{children:e.jsx(B,{href:"#",onClick:l=>{l.preventDefault(),o(t)},isActive:a===t,children:t})},t):t===a-2||t===a+2?e.jsx(p,{children:e.jsx(G,{})},t):null}),e.jsx(p,{children:e.jsx(H,{href:"#",onClick:s=>{s.preventDefault(),a<n&&o(a+1)},className:a===n?"pointer-events-none opacity-50":""})})]})})]})]})]})};export{ae as default};
