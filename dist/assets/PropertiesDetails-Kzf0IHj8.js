import{j as e}from"./ui-CMGlPv8M.js";import{d as E,r as l}from"./router-02yfTqxa.js";import{A,t as M,f,D as I,a as n,b as c,c as o,e as d,J as B,I as F,H as R,C as g,n as $}from"./index-DGiQKbnC.js";import{D as z}from"./download-Dx_JF_-F.js";import"./vendor-Dazix4UH.js";const Y=()=>{const N=E(),[m,v]=l.useState([]),[h,u]=l.useState([]),[w,P]=l.useState(!0),[r,b]=l.useState(""),[x,y]=l.useState({totalProperties:0,thisMonthProperties:0,activeProperties:0,pendingProperties:0,soldProperties:0});l.useEffect(()=>{C()},[]),l.useEffect(()=>{if(r){const s=m.filter(t=>t.title.toLowerCase().includes(r.toLowerCase())||t.propertyType.toLowerCase().includes(r.toLowerCase())||t.address.city?.toLowerCase().includes(r.toLowerCase())||t.status.toLowerCase().includes(r.toLowerCase()));u(s)}else u(m)},[r,m]);const C=async()=>{try{const s=A.getToken(),t=await fetch("https://api.akodefy.com/api/properties?limit=1000",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch properties data");const p=await t.json();if(p.success){const a=p.data.properties;v(a),u(a);const j=new Date,T=new Date(j.getFullYear(),j.getMonth(),1),k=a.filter(i=>new Date(i.createdAt)>=T).length;y({totalProperties:a.length,thisMonthProperties:k,activeProperties:a.filter(i=>i.status==="available").length,pendingProperties:a.filter(i=>i.status==="pending").length,soldProperties:a.filter(i=>["sold","rented","leased"].includes(i.status)).length})}}catch(s){console.error("Error fetching properties data:",s),M({title:"Error",description:"Failed to load properties data",variant:"destructive"})}finally{P(!1)}},D=(s,t="INR")=>`â‚¹${s.toLocaleString("en-IN")}`,L=s=>new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),S=s=>{switch(s){case"available":case"active":return e.jsx(g,{className:"w-4 h-4 text-green-600"});case"pending":return e.jsx($,{className:"w-4 h-4 text-yellow-600"});case"sold":case"rented":case"leased":return e.jsx(g,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(R,{className:"w-4 h-4 text-red-600"})}};return w?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(f,{variant:"ghost",onClick:()=>N("/admin/dashboard"),children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Properties Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete property listings and statistics"})]}),e.jsxs(f,{variant:"outline",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Export Properties"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.totalProperties})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.thisMonthProperties})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Available"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:x.activeProperties})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Pending"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.pendingProperties})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Sold/Rented"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.soldProperties})})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(F,{placeholder:"Search properties by title, type, city, or status...",value:r,onChange:s=>b(s.target.value),className:"pl-10"})]})}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{children:["All Properties (",h.length,")"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No properties found"}):h.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.address.locality,", ",s.address.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm font-medium",children:s.propertyType}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.listingType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-bold text-emerald-600",children:D(s.price,s.currency)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Listed"}),e.jsx("p",{className:"text-sm",children:L(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[S(s.status),e.jsx("span",{className:"text-sm capitalize",children:s.status})]})]})},s._id))})})]})]})};export{Y as default};
