import{j as e}from"./ui-DOY6021Z.js";import{r as n,d as te,h as ae,L as R}from"./router-2SVJvIbS.js";import{A as re,t as u,ao as K,D as O,T as ie,K as le,L as Q,at as k,H as B,ac as Y,I as ne,f as h,a as p,e as j,aq as Z,h as ee,am as ce,an as oe,B as m,l as se,av as de,aw as G,ay as X,X as me,b as V,c as q,y as xe}from"./index-8dkl62y8.js";import{i as U,c as he,g as ue}from"./propertyUtils-B_5yebUt.js";import{D as fe,a as pe,b as je,c as ge}from"./dialog-Dy1IM_sd.js";import{f as Ne}from"./favoriteService-DJxL4tVY.js";import{L as W}from"./loader-circle-BnrCgTju.js";import{S as ve}from"./square-DjxKIoGi.js";import{R as J}from"./refresh-cw-B7b8V-1W.js";import{S as be}from"./share-CbyIpNzx.js";import"./vendor-Dazix4UH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ye=({open:g,onOpenChange:b,onPropertySelect:A,selectedPropertyIds:o,maxSelections:c=10})=>{const[x,i]=n.useState("favorites"),[d,w]=n.useState(""),[f,S]=n.useState([]),[C,L]=n.useState([]),[F,$]=n.useState(!1),[T,N]=n.useState(!1),[y,P]=n.useState(null);n.useEffect(()=>{g&&x==="favorites"&&f.length===0&&E()},[g,x,f.length]),n.useEffect(()=>{g||(P(null),w(""),L([]))},[g]),n.useEffect(()=>{if(x==="search"&&d.trim()){const t=setTimeout(()=>{D()},500);return()=>clearTimeout(t)}else x==="search"&&!d.trim()&&L([])},[d,x]);const E=async()=>{try{N(!0);const t=await Ne.getFavorites();S(t.data.favorites)}catch(t){console.error("Error loading favorites:",t),u({title:"Error",description:"Failed to load favorite properties",variant:"destructive"})}finally{N(!1)}},D=async()=>{try{$(!0);const t=await K.getProperties({search:d,page:1,limit:20});t.success&&L(t.data.properties)}catch(t){console.error("Error searching properties:",t),u({title:"Error",description:"Failed to search properties",variant:"destructive"})}finally{$(!1)}},I=async t=>{if(!y){if(o.includes(t)){u({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});return}if(o.length>=c){u({title:"Selection Limit Reached",description:`You can compare up to ${c} properties at once`,variant:"destructive"});return}try{console.log("PropertySelectionDialog: Adding property",t),P(t),await A(t),console.log("PropertySelectionDialog: Property added successfully",t),u({title:"Property Added",description:"Property has been added to comparison",variant:"default"}),b(!1)}catch(l){console.error("PropertySelectionDialog: Error adding property:",l),u({title:"Error",description:"Failed to add property to comparison",variant:"destructive"})}finally{P(null)}}},M=(t,l)=>l==="rent"?`₹${t.toLocaleString("en-IN")}/month`:l==="lease"?`₹${t.toLocaleString("en-IN")}/year`:t>=1e7?`₹${(t/1e7).toFixed(1)} Cr`:t>=1e5?`₹${(t/1e5).toFixed(1)} Lac`:`₹${t.toLocaleString("en-IN")}`,z=t=>t.builtUp?`${t.builtUp} ${t.unit}`:t.plot?`${t.plot} ${t.unit}`:t.carpet?`${t.carpet} ${t.unit}`:"N/A",H=t=>t.images.find(v=>v.isPrimary)?.url||t.images[0]?.url||"/placeholder-property.jpg",_=t=>({...t,type:t.propertyType||"apartment",views:0,featured:!1,verified:!1,status:t.status||"available",listingType:t.listingType||"sale"}),s=n.useMemo(()=>f.filter(t=>t.property&&!o.includes(t.property._id)),[f,o]),a=n.useMemo(()=>C.filter(t=>!o.includes(t._id)),[C,o]),r=({property:t})=>e.jsx(p,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-20 h-20 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:[e.jsx("img",{src:H(t),alt:t.title,className:"w-full h-full object-cover",onError:l=>{l.currentTarget.style.display="none",l.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx(Z,{className:"w-8 h-8 text-muted-foreground hidden m-auto mt-6"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(ee,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[t.address.city,", ",t.address.state]})]}),e.jsx("div",{className:"text-primary font-semibold text-sm mb-2",children:M(t.price,t.listingType)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{children:t.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),e.jsx("span",{children:t.bathrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),e.jsx("span",{children:z(t.area)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",className:"text-xs",children:t.type}),e.jsx(m,{variant:"outline",className:"text-xs capitalize",children:t.listingType})]})]}),e.jsx(h,{size:"sm",onClick:()=>I(t._id),disabled:!!y||o.includes(t._id),className:"flex-shrink-0",variant:o.includes(t._id)?"secondary":"default",children:y===t._id?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-1 animate-spin"}),"Adding..."]}):o.includes(t._id)?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Add"]})})]})})});return e.jsx(fe,{open:g,onOpenChange:b,children:e.jsxs(pe,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsx(je,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Add Property to Comparison"]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(ie,{value:x,onValueChange:i,className:"h-full flex flex-col",children:[e.jsxs(le,{className:"grid w-full grid-cols-2",children:[e.jsxs(Q,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"From Favorites (",s.length,")"]}),e.jsxs(Q,{value:"search",className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Search Properties"]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx(Y,{value:"favorites",className:"h-full overflow-hidden",children:e.jsx("div",{className:"space-y-4 h-full overflow-y-auto max-h-[500px]",children:T?e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsx(W,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading favorites..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(k,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Available Favorites"}),e.jsx("p",{className:"text-muted-foreground",children:f.length===0?"You haven't favorited any properties yet":"All your favorite properties are already in the comparison"})]}):s.map(t=>t.property&&e.jsx(r,{property:_(t.property)},t.property._id))})}),e.jsx(Y,{value:"search",className:"h-full overflow-hidden",children:e.jsxs("div",{className:"space-y-4 h-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"Search by property name, location, or area...",value:d,onChange:t=>w(t.target.value),className:"pl-10"})]}),e.jsx("div",{className:"h-full overflow-y-auto max-h-[450px] space-y-4",children:F?e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsx(W,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Searching properties..."})]}):d.trim()?a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No available properties match your search criteria"})]}):a.map(t=>e.jsx(r,{property:t},t._id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Properties"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter a property name, location, or area to search"})]})})]})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.length,"/",c," properties selected"]}),e.jsx(h,{variant:"outline",onClick:()=>b(!1),children:"Cancel"})]})]})})},Re=()=>{te();const{isConnected:g,lastEvent:b}=de(),[A,o]=ae(),[c,x]=n.useState([]),[i,d]=n.useState([]),[w,f]=n.useState(!0),[S,C]=n.useState(!1),[L,F]=n.useState(!1),[$,T]=n.useState(!1),N=n.useCallback(async s=>{if(s.length===0){d([]),f(!1);return}try{f(!0);const a=s.map(l=>K.getProperty(l).catch(v=>(console.error(`Failed to load property ${l}:`,v),null))),t=(await Promise.all(a)).filter(l=>l!==null&&l.success).map(l=>l.data.property);d(t)}catch(a){console.error("Error loading properties:",a),u({title:"Error",description:"Failed to load properties for comparison",variant:"destructive"})}finally{f(!1)}},[]),y=n.useCallback(async()=>{C(!0),await N(c),C(!1)},[N,c]);n.useEffect(()=>{if($){T(!1);return}const s=A.get("properties")?.split(",").filter(Boolean)||[];console.log("PropertyComparison: useEffect loading from URL params:",s);const a=c.join(","),r=s.join(",");a!==r&&(console.log("PropertyComparison: URL params differ from current state, updating..."),x(s),N(s))},[A,N,c,$]),G("property_updated",s=>{s.propertyId&&c.includes(s.propertyId)&&(console.log("Property updated via realtime, refreshing comparison"),y())}),G("property_favorited",s=>{s.propertyId&&c.includes(s.propertyId)&&d(a=>a.map(r=>r._id===s.propertyId?{...r,isFavorited:s.action==="add"}:r))});const P=(s,a)=>a==="rent"?`₹${s.toLocaleString("en-IN")}/month`:a==="lease"?`₹${s.toLocaleString("en-IN")}/year`:s>=1e7?`₹${(s/1e7).toFixed(1)} Cr`:s>=1e5?`₹${(s/1e5).toFixed(1)} Lac`:`₹${s.toLocaleString("en-IN")}`,E=s=>s.builtUp?`${s.builtUp} ${s.unit}`:s.plot?`${s.plot} ${s.unit}`:s.carpet?`${s.carpet} ${s.unit}`:"N/A",D=s=>{const a=s.area.builtUp||s.area.carpet||s.area.plot||0;return a===0?0:Math.round(s.price/a)},I=s=>s.images.find(r=>r.isPrimary)?.url||s.images[0]?.url||"/placeholder-property.jpg",M=s=>{const a=c.filter(r=>r!==s);if(x(a),d(r=>r.filter(t=>t._id!==s)),T(!0),a.length>0){const r=new URLSearchParams;r.set("properties",a.join(",")),o(r)}else o(new URLSearchParams)},z=()=>{F(!0)},H=async s=>{console.log("PropertyComparison: handlePropertySelect called with:",s),console.log("PropertyComparison: Current selectedProperties:",c),console.log("PropertyComparison: Current properties length:",i.length);try{if(c.includes(s)){console.log("PropertyComparison: Property already selected"),u({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});return}const a=[...c,s];console.log("PropertyComparison: Setting new properties:",a),console.log("PropertyComparison: Loading property data...");const r=await K.getProperty(s);if(r.success){console.log("PropertyComparison: Property loaded successfully:",r.data.property.title),x(a),d(l=>{const v=[...l,r.data.property];return console.log("PropertyComparison: Updated properties list length:",v.length),v}),T(!0);const t=new URLSearchParams;t.set("properties",a.join(",")),o(t),u({title:"Property Added",description:`${r.data.property.title} has been added to comparison`}),console.log("PropertyComparison: Property successfully added to comparison"),await new Promise(l=>setTimeout(l,100));return}else throw new Error("Failed to load property")}catch(a){throw console.error("PropertyComparison: Error adding property:",a),u({title:"Error",description:"Failed to add property to comparison",variant:"destructive"}),a}},_=(s,a=!1)=>{if(!s)return{display:"-",color:"text-muted-foreground"};if(a&&i.length>1){const r=i.map(v=>typeof s=="number"?s:0),t=Math.max(...r),l=Math.min(...r);if(s===t&&s!==l)return{display:s,color:"text-green-600",isBest:!0};if(s===l&&s!==t)return{display:s,color:"text-red-600",isWorst:!0}}return{display:s,color:"text-foreground"}};return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${g?"bg-green-500":"bg-red-500"}`}),b&&e.jsxs(m,{variant:"secondary",className:"text-xs",children:["Last update: ",new Date(b.timestamp).toLocaleTimeString()]})]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:y,disabled:S,children:[e.jsx(J,{className:`w-4 h-4 mr-2 ${S?"animate-spin":""}`}),S?"Refreshing...":"Refresh"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(X,{className:"w-8 h-8 text-primary"}),"Compare Properties"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Side-by-side comparison of your selected properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{to:"/customer/favorites",children:e.jsxs(h,{variant:"outline",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Back to Favorites"]})}),e.jsxs(h,{variant:"outline",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Share Comparison"]})]})]}),w&&e.jsx(p,{children:e.jsx(j,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading properties for comparison..."})]})})}),!w&&i.length===0?e.jsx(p,{children:e.jsxs(j,{className:"p-12 text-center",children:[e.jsx(X,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties to compare"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add properties from your favorites or search results to start comparing"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(R,{to:"/customer/favorites",children:e.jsxs(h,{children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"View Favorites"]})}),e.jsx(R,{to:"/customer/search",children:e.jsx(h,{variant:"outline",children:"Search Properties"})})]})]})}):!w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`grid gap-4 ${i.length===1?"grid-cols-1 max-w-md mx-auto":i.length===2?"grid-cols-1 lg:grid-cols-2":i.length===3?"grid-cols-1 lg:grid-cols-3":i.length===4?"grid-cols-1 md:grid-cols-2 lg:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"}`,children:[i.map(s=>e.jsxs(p,{className:"relative",children:[e.jsx("button",{onClick:()=>M(s._id),className:"absolute top-2 right-2 z-10 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsxs(j,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted flex items-center justify-center mb-4 rounded-lg overflow-hidden",children:[e.jsx("img",{src:I(s),alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx(Z,{className:"w-8 h-8 text-muted-foreground hidden"})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{className:"line-clamp-1",children:[s.address.city,", ",s.address.state]})]}),e.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:P(s.price,s.listingType)}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.bedrooms," BHK"]}),e.jsx("span",{children:E(s.area)}),e.jsxs("span",{children:["₹",D(s),"/sq.ft"]})]})]})]},s._id)),e.jsx(p,{className:"border-dashed border-2",children:e.jsx(j,{className:"p-4 h-full flex items-center justify-center",children:e.jsxs(h,{variant:"ghost",className:"h-full w-full flex flex-col gap-2",onClick:z,children:[e.jsx(O,{className:"w-8 h-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add Property"})]})})})]}),e.jsxs(p,{children:[e.jsx(V,{children:e.jsx(q,{children:"Detailed Comparison"})}),e.jsx(j,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4 w-48",children:"Feature"}),i.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsx("div",{className:"truncate",children:s.title})},s._id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Price"}),i.map(s=>{const a=_(s.price,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[P(s.price,s.listingType),a.isBest&&e.jsx(m,{variant:"default",className:"text-xs",children:"Expensive"}),a.isWorst&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Affordable"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Price per sq.ft"}),i.map(s=>{const a=D(s),r=_(a,!0);return e.jsx("td",{className:`p-4 ${r.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:["₹",a,r.isBest&&e.jsx(m,{variant:"default",className:"text-xs",children:"Highest"}),r.isWorst&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Best Value"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Area"}),i.map(s=>{const a=s.area.builtUp||s.area.carpet||s.area.plot||0,r=_(a,!0);return e.jsx("td",{className:`p-4 ${r.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[E(s.area),r.isBest&&e.jsx(m,{variant:"default",className:"text-xs",children:"Largest"}),r.isWorst&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Smallest"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Bedrooms"}),i.map(s=>e.jsxs("td",{className:"p-4",children:[s.bedrooms," BHK"]},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Bathrooms"}),i.map(s=>e.jsx("td",{className:"p-4",children:s.bathrooms},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Property Type"}),i.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(m,{variant:"outline",className:"capitalize",children:s.type})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Listing Type"}),i.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(m,{variant:"outline",className:"capitalize",children:s.listingType})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Status"}),i.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(m,{variant:s.status==="available"?"default":"secondary",className:s.status==="available"?"bg-green-500":"",children:s.status==="available"?"Available":s.status})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium",children:"Location"}),i.map(s=>e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.address.city}),e.jsx("div",{className:"text-muted-foreground",children:s.address.state})]})},s._id))]})]})]})})})]}),e.jsxs(p,{children:[e.jsx(V,{children:e.jsx(q,{children:"Amenities Comparison"})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:Array.from(new Set(i.flatMap(s=>s.amenities))).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:String(s)}),e.jsx("div",{className:"flex gap-4",children:i.map(r=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground w-16 truncate",children:[r.title.slice(0,15),"..."]}),r.amenities.includes(String(s))?e.jsx(se,{className:"w-4 h-4 text-green-500"}):e.jsx(we,{className:"w-4 h-4 text-muted-foreground"})]},r._id))})]},a))})})]}),e.jsxs(p,{children:[e.jsx(V,{children:e.jsx(q,{children:"Contact Information"})}),e.jsx(j,{children:e.jsx("div",{className:"grid gap-4",children:i.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2",children:[s.owner&&s.owner.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:U(s.owner)?"Listed by":"Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:he(s)}),s.owner.profile.phone&&!U(s.owner)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.profile.phone})]}),s.agent&&s.agent.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:U(s.agent)?"Listed by":"Agent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ue(s.agent)}),s.agent.profile.phone&&!U(s.agent)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.agent.profile.phone})]}),!s.owner?.profile&&!s.agent?.profile&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact information not available"})]})]},s._id))})})]}),e.jsx("div",{className:"flex justify-center gap-4",children:i.map(s=>e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("h4",{className:"font-medium text-sm",children:[s.title.slice(0,25),"..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{size:"sm",variant:"outline",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),"Call"]}),e.jsx(R,{to:`/property/${s._id}`,children:e.jsx(h,{size:"sm",children:"View Details"})})]})]})},s._id))})]}),e.jsx(ye,{open:L,onOpenChange:F,onPropertySelect:H,selectedPropertyIds:c,maxSelections:10})]})};export{Re as default};
