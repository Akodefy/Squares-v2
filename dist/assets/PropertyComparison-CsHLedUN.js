import{j as e}from"./ui-CMGlPv8M.js";import{r,d as Ne,h as be,L as M}from"./router-02yfTqxa.js";import{t as h,aH as Q,V as ce,W as oe,Y as de,Z as me,$ as xe,a5 as ve,a6 as we,a7 as Z,O as U,J as I,au as ee,Q as G,I as ye,a as g,e as C,h as he,aF as Ce,aG as Se,aE as ke,B as x,a3 as Pe,aK as se,f as j,aV as te,X as ae,aJ as $e,a0 as _e,b as W,c as Y,l as Ae,z as K,y as Te}from"./index-DGiQKbnC.js";import{i as A,c as re,g as ie}from"./propertyUtils-DZZpAHgC.js";import{S as le}from"./scroll-area-Dc6MWRfJ.js";import{f as ze}from"./favoriteService-CtvItonL.js";import{R as ne}from"./refresh-cw-bU1KP5oX.js";import{S as Ee}from"./share-Bb-l1092.js";import"./vendor-Dazix4UH.js";const Fe=({open:c,onOpenChange:N,onPropertySelect:P,selectedPropertyIds:o,maxSelections:n=10})=>{const[u,t]=r.useState([]),[m,p]=r.useState([]),[T,$]=r.useState(!1),[D,B]=r.useState(!1),[S,z]=r.useState(null),[b,d]=r.useState(""),[k,R]=r.useState("favorites"),[v,V]=r.useState(null);r.useEffect(()=>{c&&k==="favorites"&&u.length===0&&H()},[c,k]),r.useEffect(()=>{if(!c||k!=="search")return;if(v&&clearTimeout(v),b.trim().length<2){p([]);return}const i=setTimeout(()=>{q(b)},500);return V(i),()=>{i&&clearTimeout(i)}},[b,k,c]),r.useEffect(()=>{c||(d(""),z(null),p([]))},[c]);const H=async()=>{try{$(!0);const i=await ze.getFavorites({limit:100});i.success&&t(i.data.favorites)}catch(i){console.error("Error loading favorites:",i),h({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{$(!1)}},q=async i=>{try{B(!0);const w=await Q.getProperties({search:i,page:1,limit:50});w.success&&p(w.data.properties)}catch(w){console.error("Error searching properties:",w),h({title:"Error",description:"Failed to search properties",variant:"destructive"})}finally{B(!1)}},E=r.useCallback(async i=>{if(!S){if(o.includes(i)){h({title:"Already Selected",description:"This property is already in your comparison",variant:"destructive"});return}if(o.length>=n){h({title:"Maximum Selections Reached",description:`You can only compare up to ${n} properties`,variant:"destructive"});return}try{z(i),await P(i),N(!1)}catch(w){console.error("Error selecting property:",w)}finally{z(null)}}},[S,o,n,P,N]),_=r.useMemo(()=>u.filter(i=>i.property&&!o.includes(i.property._id)),[u,o]),F=r.useMemo(()=>m.filter(i=>!o.includes(i._id)),[m,o]);return e.jsx(ce,{open:c,onOpenChange:N,children:e.jsxs(oe,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(de,{children:[e.jsx(me,{children:"Select Property to Compare"}),e.jsxs(xe,{children:["Click on a property to add it to your comparison. You can select up to ",n," properties. (",o.length,"/",n," selected)"]})]}),e.jsxs(ve,{value:k,onValueChange:R,children:[e.jsxs(we,{className:"grid w-full grid-cols-2",children:[e.jsxs(Z,{value:"favorites",className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Favorites (",_.length,")"]}),e.jsxs(Z,{value:"search",className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Search Properties"]})]}),e.jsx(ee,{value:"favorites",className:"mt-4",children:e.jsx(le,{className:"h-[500px] pr-4",children:T?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(G,{className:"w-8 h-8 animate-spin text-primary"})}):_.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Available Favorites"}),e.jsx("p",{className:"text-sm",children:u.length===0?"You haven't favorited any properties yet":"All your favorite properties are already in the comparison"})]}):e.jsx("div",{className:"space-y-3",children:_.map(i=>e.jsx(J,{property:i.property,isAdding:S===i.property._id,onClick:()=>E(i.property._id)},i._id))})})}),e.jsxs(ee,{value:"search",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(ye,{placeholder:"Search by property name, location, or area...",value:b,onChange:i=>d(i.target.value),className:"pl-10"})]}),e.jsx(le,{className:"h-[450px] pr-4",children:D?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(G,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Searching properties..."})]}):b.trim().length<2?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Properties"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter at least 2 characters to search"})]}):F.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-sm",children:"No available properties match your search criteria"})]}):e.jsx("div",{className:"space-y-3",children:F.map(i=>e.jsx(J,{property:i,isAdding:S===i._id,onClick:()=>E(i._id)},i._id))})})]})]})]})})},J=r.memo(({property:c,isAdding:N,onClick:P})=>{const o=(t,m)=>m==="rent"?`₹${t.toLocaleString("en-IN")}/month`:m==="lease"?`₹${t.toLocaleString("en-IN")}/year`:t>=1e7?`₹${(t/1e7).toFixed(1)} Cr`:t>=1e5?`₹${(t/1e5).toFixed(1)} Lac`:`₹${t.toLocaleString("en-IN")}`,n=t=>t.builtUp?`${t.builtUp} ${t.unit}`:t.plot?`${t.plot} ${t.unit}`:t.carpet?`${t.carpet} ${t.unit}`:"N/A",u=t=>t.find(p=>p.isPrimary)?.url||t[0]?.url||"/placeholder-property.jpg";return e.jsx(g,{className:`cursor-pointer transition-all hover:shadow-md ${N?"opacity-50":""}`,onClick:N?void 0:P,children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:u(c.images),alt:c.title,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/placeholder-property.jpg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:c.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(he,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[c.address.city,", ",c.address.state]})]}),e.jsx("div",{className:"text-primary font-semibold text-sm mb-2",children:o(c.price,c.listingType)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),e.jsx("span",{children:c.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{children:c.bathrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),e.jsx("span",{children:n(c.area)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",className:"text-xs",children:c.type}),e.jsx(x,{variant:"outline",className:"text-xs capitalize",children:c.listingType}),N&&e.jsxs(x,{variant:"secondary",className:"text-xs",children:[e.jsx(G,{className:"w-3 h-3 mr-1 animate-spin"}),"Adding..."]})]})]})]})})})});J.displayName="PropertyCard";const qe=()=>{Ne();const{isConnected:c,lastEvent:N}=Pe(),[P,o]=be(),[n,u]=r.useState([]),[t,m]=r.useState([]),[p,T]=r.useState(!0),[$,D]=r.useState(!1),[B,S]=r.useState(!1),[z,b]=r.useState(!1),[d,k]=r.useState(null),R=r.useRef(!1),v=r.useCallback(async s=>{if(s.length===0){m([]),T(!1);return}try{T(!0);const a=s.map(f=>Q.getProperty(f).catch(X=>(console.error(`Failed to load property ${f}:`,X),null))),y=(await Promise.all(a)).filter(f=>f!==null&&f.success).map(f=>f.data.property);m(y)}catch(a){console.error("Error loading properties:",a),h({title:"Error",description:"Failed to load properties for comparison",variant:"destructive"})}finally{T(!1)}},[]),V=r.useCallback(async()=>{n.length!==0&&(D(!0),await v(n),D(!1))},[v,n]);r.useEffect(()=>{if(!R.current){const s=P.get("properties")?.split(",").filter(Boolean)||[];u(s),v(s),R.current=!0}},[]);const H=r.useCallback(s=>{s.propertyId&&n.includes(s.propertyId)&&(console.log("Property updated via realtime, refreshing comparison"),v(n))},[n,v]),q=r.useCallback(s=>{s.propertyId&&m(a=>a.map(l=>l._id===s.propertyId?{...l,isFavorited:s.action==="add"}:l))},[]);se("property_updated",H),se("property_favorited",q);const E=r.useCallback((s,a)=>a==="rent"?`₹${s.toLocaleString("en-IN")}/month`:a==="lease"?`₹${s.toLocaleString("en-IN")}/year`:s>=1e7?`₹${(s/1e7).toFixed(1)} Cr`:s>=1e5?`₹${(s/1e5).toFixed(1)} Lac`:`₹${s.toLocaleString("en-IN")}`,[]),_=r.useCallback(s=>s.builtUp?`${s.builtUp} ${s.unit}`:s.plot?`${s.plot} ${s.unit}`:s.carpet?`${s.carpet} ${s.unit}`:"N/A",[]),F=r.useCallback(s=>{const a=s.area.builtUp||s.area.carpet||s.area.plot||0;return a===0?0:Math.round(s.price/a)},[]),i=r.useCallback(s=>s.images.find(l=>l.isPrimary)?.url||s.images[0]?.url||"/placeholder-property.jpg",[]),w=r.useCallback(s=>{const a=n.filter(l=>l!==s);u(a),m(l=>l.filter(y=>y._id!==s)),a.length>0?o({properties:a.join(",")},{replace:!0}):o({},{replace:!0})},[n,o]),ue=r.useCallback(()=>{if(n.length>=10){h({title:"Comparison Limit Reached",description:"You can compare up to 10 properties at once. Remove a property to add another.",variant:"destructive"});return}S(!0)},[n.length]),fe=r.useCallback(async s=>{try{if(n.includes(s)){h({title:"Already Selected",description:"This property is already in your comparison list",variant:"destructive"});return}const a=await Q.getProperty(s);if(a.success){const l=[...n,s];u(l),m(y=>[...y,a.data.property]),o({properties:l.join(",")},{replace:!0}),h({title:"Property Added",description:`${a.data.property.title} has been added to comparison`})}else throw new Error("Failed to load property")}catch(a){throw console.error("Error adding property:",a),h({title:"Error",description:"Failed to add property to comparison",variant:"destructive"}),a}},[n,o]),O=r.useCallback((s,a=!1)=>{if(!s)return{display:"-",color:"text-muted-foreground"};if(a&&t.length>1){const l=t.map(X=>typeof s=="number"?s:0),y=Math.max(...l),f=Math.min(...l);if(s===y&&s!==f)return{display:s,color:"text-green-600",isBest:!0};if(s===f&&s!==y)return{display:s,color:"text-red-600",isWorst:!0}}return{display:s,color:"text-foreground"}},[t]),je=r.useMemo(()=>Array.from(new Set(t.flatMap(s=>s.amenities))),[t]),pe=r.useCallback(s=>{const a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),l=s.owner?.profile?.phone||s.agent?.profile?.phone;if(!l){h({title:"Contact Unavailable",description:"Contact information is not available for this property",variant:"destructive"});return}a?window.location.href=`tel:${l}`:(k(s),b(!0))},[]),L=s=>s.owner?.profile?.phone||s.agent?.profile?.phone||null,ge=s=>s.owner?.profile?re(s):s.agent?.profile?ie(s.agent):"Property Contact";return e.jsxs("div",{className:"space-y-6 pt-16",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(j,{variant:"outline",size:"sm",onClick:V,disabled:$,children:[e.jsx(ne,{className:`w-4 h-4 mr-2 ${$?"animate-spin":""}`}),$?"Refreshing...":"Refresh"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(te,{className:"w-8 h-8 text-primary"}),"Compare Properties"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Side-by-side comparison of your selected properties (",t.length,"/10)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{to:"/customer/favorites",children:e.jsxs(j,{variant:"outline",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Back to Favorites"]})}),e.jsxs(j,{variant:"outline",disabled:t.length===0,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Share Comparison"]})]})]}),p&&e.jsx(g,{children:e.jsx(C,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading properties for comparison..."})]})})}),!p&&t.length===0?e.jsx(g,{children:e.jsxs(C,{className:"p-12 text-center",children:[e.jsx(te,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties to compare"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add properties from your favorites or search results to start comparing"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(M,{to:"/customer/favorites",children:e.jsxs(j,{children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"View Favorites"]})}),e.jsx(M,{to:"/customer/search",children:e.jsx(j,{variant:"outline",children:"Search Properties"})})]})]})}):!p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[t.map(s=>e.jsxs(g,{className:"relative",children:[e.jsx("button",{onClick:()=>w(s._id),className:"absolute top-2 right-2 z-10 p-1 bg-destructive text-destructive-foreground rounded-full hover:bg-destructive/90",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-muted flex items-center justify-center mb-4 rounded-lg overflow-hidden",children:[e.jsx("img",{src:i(s),alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.nextElementSibling?.classList.remove("hidden")}}),e.jsx($e,{className:"w-8 h-8 text-muted-foreground hidden"})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{className:"line-clamp-1",children:[s.address.city,", ",s.address.state]})]}),e.jsx("div",{className:"text-lg font-bold text-primary mb-2",children:E(s.price,s.listingType)}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.bedrooms," BHK"]}),e.jsx("span",{children:_(s.area)}),e.jsxs("span",{children:["₹",F(s),"/sq.ft"]})]})]})]},s._id)),t.length<10&&e.jsx(g,{className:"border-dashed border-2",children:e.jsx(C,{className:"p-4 h-full flex items-center justify-center min-h-[300px]",children:e.jsxs(j,{variant:"ghost",className:"h-full w-full flex flex-col gap-2",onClick:ue,children:[e.jsx(_e,{className:"w-8 h-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Add Property"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.length,"/10)"]})]})})})]}),e.jsxs(g,{children:[e.jsx(W,{children:e.jsx(Y,{children:"Detailed Comparison"})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4 w-48 sticky left-0 bg-background z-10",children:"Feature"}),t.map(s=>e.jsx("th",{className:"text-left p-4 min-w-64",children:e.jsx("div",{className:"truncate max-w-64",children:s.title})},s._id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price"}),t.map(s=>{const a=O(s.price,!0);return e.jsx("td",{className:`p-4 ${a.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[E(s.price,s.listingType),a.isBest&&e.jsx(x,{variant:"default",className:"text-xs",children:"Expensive"}),a.isWorst&&e.jsx(x,{variant:"secondary",className:"text-xs",children:"Affordable"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Price per sq.ft"}),t.map(s=>{const a=F(s),l=O(a,!0);return e.jsx("td",{className:`p-4 ${l.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:["₹",a,l.isBest&&e.jsx(x,{variant:"default",className:"text-xs",children:"Highest"}),l.isWorst&&e.jsx(x,{variant:"secondary",className:"text-xs",children:"Best Value"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Area"}),t.map(s=>{const a=s.area.builtUp||s.area.carpet||s.area.plot||0,l=O(a,!0);return e.jsx("td",{className:`p-4 ${l.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[_(s.area),l.isBest&&e.jsx(x,{variant:"default",className:"text-xs",children:"Largest"}),l.isWorst&&e.jsx(x,{variant:"secondary",className:"text-xs",children:"Smallest"})]})},s._id)})]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bedrooms"}),t.map(s=>e.jsxs("td",{className:"p-4",children:[s.bedrooms," BHK"]},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Bathrooms"}),t.map(s=>e.jsx("td",{className:"p-4",children:s.bathrooms},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Property Type"}),t.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(x,{variant:"outline",className:"capitalize",children:s.type})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Listing Type"}),t.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(x,{variant:"outline",className:"capitalize",children:s.listingType})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Status"}),t.map(s=>e.jsx("td",{className:"p-4",children:e.jsx(x,{variant:s.status==="available"?"default":"secondary",className:s.status==="available"?"bg-green-500":"",children:s.status==="available"?"Available":s.status})},s._id))]}),e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-4 font-medium sticky left-0 bg-background z-10",children:"Location"}),t.map(s=>e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.address.city}),e.jsx("div",{className:"text-muted-foreground",children:s.address.state})]})},s._id))]})]})]})})})]}),e.jsxs(g,{children:[e.jsx(W,{children:e.jsx(Y,{children:"Amenities Comparison"})}),e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-background p-4 text-left font-semibold min-w-[200px] border-r",children:"Amenity"}),t.map(s=>e.jsx("th",{className:"p-4 text-center font-medium min-w-[150px]",children:e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{className:"text-sm truncate",title:s.title,children:s.title.length>20?`${s.title.slice(0,20)}...`:s.title})})},s._id))]})}),e.jsx("tbody",{children:je.map((s,a)=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"sticky left-0 z-10 bg-background p-4 font-medium border-r",children:String(s)}),t.map(l=>e.jsx("td",{className:"p-4 text-center",children:l.amenities.includes(String(s))?e.jsx(Ae,{className:"w-5 h-5 text-green-600 mx-auto"}):e.jsx(ae,{className:"w-5 h-5 text-red-400 mx-auto"})},l._id))]},a))})]})})})]}),e.jsxs(g,{children:[e.jsx(W,{children:e.jsx(Y,{children:"Contact Information"})}),e.jsx(C,{children:e.jsx("div",{className:"grid gap-4",children:t.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2",children:[s.owner&&s.owner.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:A(s.owner)?"Listed by":"Owner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:re(s)}),s.owner.profile.phone&&!A(s.owner)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.profile.phone})]}),s.agent&&s.agent.profile&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:A(s.agent)?"Listed by":"Agent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ie(s.agent)}),s.agent.profile.phone&&!A(s.agent)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.agent.profile.phone})]}),!s.owner?.profile&&!s.agent?.profile&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact information not available"})]})]},s._id))})})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map(s=>e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(j,{size:"sm",variant:"outline",onClick:()=>pe(s),disabled:!L(s),children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Call"]}),e.jsx(M,{to:`/customer/property/${s._id}`,children:e.jsx(j,{size:"sm",children:"View Details"})})]})]})},s._id))})]}),e.jsx(Fe,{open:B,onOpenChange:S,onPropertySelect:fe,selectedPropertyIds:n,maxSelections:10}),e.jsx(ce,{open:z,onOpenChange:b,children:e.jsxs(oe,{className:"sm:max-w-md",children:[e.jsxs(de,{children:[e.jsx(me,{children:"Contact Information"}),e.jsx(xe,{children:d?.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[e.jsx(Te,{className:"w-10 h-10 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:d&&ge(d)}),e.jsx("p",{className:"text-muted-foreground text-xs",children:d?.owner&&!A(d.owner)?"Owner":d?.agent&&!A(d.agent)?"Agent":"Contact"})]})]}),d&&L(d)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-lg",children:L(d)})]}),e.jsx(j,{size:"sm",onClick:()=>{const s=L(d);s&&(navigator.clipboard.writeText(s),h({description:"Phone number copied to clipboard"}))},children:"Copy"})]}),e.jsxs(j,{className:"w-full",size:"lg",onClick:()=>{const s=L(d);s&&(window.location.href=`tel:${s}`)},children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Call Now"]})]})]})]})})]})};export{qe as default};
