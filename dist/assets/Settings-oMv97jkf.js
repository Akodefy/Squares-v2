import{j as e}from"./ui-DHQhougw.js";import{r as s}from"./router-Bi51YGN-.js";import{s as t,r as a,t as i,l as n,v as l,an as r,f as c,a5 as o,a6 as d,a7 as m,am as u,j as h,al as x,a as g,b as p,c as y,d as j,e as f,L as v,I as N,ak as S,S as w,m as b,n as k,o as A,p as C,M as E}from"./index-Bu7cQZk6.js";import{S as F}from"./switch-CFuQAvL-.js";import{S as P}from"./separator-Cc6m3zXA.js";import{A as R,a as M}from"./alert-C4uLZiHe.js";import{R as T}from"./refresh-cw-B3tEV7zr.js";import{C as I}from"./circle-alert-BRbSeU_O.js";import{G as L}from"./globe-BTeuAI4G.js";import{S as D}from"./shield-CBkWNUlC.js";import{K}from"./key-BIVETyoX.js";import{R as $}from"./rotate-ccw-DfN1L64c.js";import"./vendor-eVk5PToZ.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=t("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),_=t("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=new class{baseUrl="https://api.buildhomemartsquares.com/api";async makeRequest(e,s={}){const t=`${this.baseUrl}${e}`,i={headers:{"Content-Type":"application/json",...s.headers},...s},n=a.getToken();n&&(i.headers={...i.headers,Authorization:`Bearer ${n}`});try{const e=await fetch(t,i);if(!e.ok){const s=await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`}));throw new Error(s.message||"An error occurred")}return await e.json()}catch(l){throw l}}async getSettings(){try{return await this.makeRequest("/admin/settings")}catch(e){return{success:!0,data:{settings:this.getDefaultSettings()}}}}async updateSettings(e){try{const s=await this.makeRequest(`/admin/settings/${e.category}`,{method:"PATCH",body:JSON.stringify(e.settings)});return i({title:"Success",description:`${this.capitalizeFirst(e.category)} settings updated successfully!`}),s}catch(s){const t=s instanceof Error?s.message:`Failed to update ${e.category} settings`;throw i({title:"Error",description:t,variant:"destructive"}),s}}async updateGeneralSettings(e){return this.updateSettings({category:"general",settings:e})}async updateNotificationSettings(e){return this.updateSettings({category:"notifications",settings:e})}async updateSecuritySettings(e){return this.updateSettings({category:"security",settings:e})}async updatePaymentSettings(e){return this.updateSettings({category:"payment",settings:e})}async updateSystemSettings(e){return this.updateSettings({category:"system",settings:e})}async updateIntegrationSettings(e){return this.updateSettings({category:"integrations",settings:e})}async updateLocationSettings(e){return this.updateSettings({category:"location",settings:e})}async resetSettings(e){try{const s=await this.makeRequest(`/admin/settings/${e}/reset`,{method:"POST"});return i({title:"Success",description:`${this.capitalizeFirst(e)} settings reset to defaults!`}),s}catch(s){const t=s instanceof Error?s.message:`Failed to reset ${e} settings`;throw i({title:"Error",description:t,variant:"destructive"}),s}}async testNotification(e){try{const s=await this.makeRequest("/admin/settings/test-notification",{method:"POST",body:JSON.stringify({type:e})});return i({title:s.success?"Success":"Failed",description:s.message,variant:s.success?"default":"destructive"}),s}catch(s){const t=s instanceof Error?s.message:`Failed to send test ${e} notification`;throw i({title:"Error",description:t,variant:"destructive"}),s}}async testIntegration(e){try{const s=await this.makeRequest("/admin/settings/test-integration",{method:"POST",body:JSON.stringify({type:e})});return i({title:s.success?"Integration Test Successful":"Integration Test Failed",description:s.message,variant:s.success?"default":"destructive"}),s}catch(s){const t=s instanceof Error?s.message:`Failed to test ${e} integration`;throw i({title:"Error",description:t,variant:"destructive"}),s}}async syncSettingRealtime(e,s,t){try{return await this.makeRequest("/admin/settings/sync",{method:"POST",body:JSON.stringify({category:e,key:s,value:t})})}catch(a){return{success:!1,message:"Sync failed, will retry"}}}async exportSettings(){try{const e=await fetch(`${this.baseUrl}/admin/settings/export`,{method:"GET",headers:{Authorization:`Bearer ${a.getToken()}`}});if(!e.ok)throw new Error("Failed to export settings");return await e.blob()}catch(e){const s=e instanceof Error?e.message:"Failed to export settings";throw i({title:"Error",description:s,variant:"destructive"}),e}}async importSettings(e){try{const s=new FormData;s.append("settings",e);const t=await fetch(`${this.baseUrl}/admin/settings/import`,{method:"POST",headers:{Authorization:`Bearer ${a.getToken()}`},body:s});if(!t.ok)throw new Error("Failed to import settings");const n=await t.json();return i({title:"Success",description:"Settings imported successfully!"}),n}catch(s){const e=s instanceof Error?s.message:"Failed to import settings";throw i({title:"Error",description:e,variant:"destructive"}),s}}getDefaultSettings(){return{general:{siteName:"BuildHomeMart Squares",siteDescription:"Premium Real Estate Platform",contactEmail:"contact@buildhomemartsquares.com",supportEmail:"support@buildhomemartsquares.com",maintenanceMode:!1,registrationEnabled:!0,defaultCurrency:"INR",defaultLanguage:"en",timezone:"Asia/Kolkata"},notifications:{emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,adminAlerts:!0,systemAlerts:!0,userActivityAlerts:!1,marketingEmails:!0,weeklyReports:!0},security:{sessionTimeout:30,passwordMinLength:8,maxLoginAttempts:5,requireEmailVerification:!0,requirePhoneVerification:!1,allowPasswordReset:!0,autoLockAccount:!0,ipWhitelisting:!1},payment:{currency:"INR",taxRate:18,processingFee:2.5,refundPolicy:"7 days",autoRefund:!1,paymentMethods:["card","upi","netbanking"],minimumAmount:100,maximumAmount:1e6},system:{backupEnabled:!0,backupFrequency:"daily",backupRetention:30,maintenanceWindow:"02:00-04:00",debugMode:!1,logLevel:"info",performanceMode:"balanced"},integrations:{emailProvider:"smtp",smsProvider:"twilio",paymentGateway:"razorpay"},location:{defaultCountry:"India",defaultState:"Karnataka",defaultDistrict:"Bangalore Urban",defaultCity:"Bangalore",enableLocationAutodetection:!0,locationDataSource:"loca",radiusUnit:"km",defaultRadius:25}}}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}validateSettings(e,s){const t=[];switch(e){case"general":s.siteName?.trim()||t.push("Site name is required"),s.contactEmail&&!this.validateEmail(s.contactEmail)&&t.push("Invalid contact email"),s.supportEmail&&!this.validateEmail(s.supportEmail)&&t.push("Invalid support email");break;case"security":s.sessionTimeout&&(s.sessionTimeout<5||s.sessionTimeout>480)&&t.push("Session timeout must be between 5 and 480 minutes"),s.passwordMinLength&&(s.passwordMinLength<6||s.passwordMinLength>50)&&t.push("Password minimum length must be between 6 and 50 characters"),s.maxLoginAttempts&&(s.maxLoginAttempts<3||s.maxLoginAttempts>20)&&t.push("Max login attempts must be between 3 and 20");break;case"payment":s.taxRate&&(s.taxRate<0||s.taxRate>100)&&t.push("Tax rate must be between 0% and 100%"),s.processingFee&&(s.processingFee<0||s.processingFee>20)&&t.push("Processing fee must be between 0% and 20%"),s.minimumAmount&&s.minimumAmount<0&&t.push("Minimum amount cannot be negative"),s.maximumAmount&&s.minimumAmount&&s.maximumAmount<s.minimumAmount&&t.push("Maximum amount cannot be less than minimum amount")}return{isValid:0===t.length,errors:t}}},V=()=>{const[t,a]=s.useState(!0),[V,B]=s.useState({}),[G,W]=s.useState({}),[O,U]=s.useState(!1),[J,H]=s.useState(null),[Q,X]=s.useState(null),[Y,Z]=s.useState({general:!1,notifications:!1,security:!1,payment:!1,system:!1,integrations:!1,location:!1}),[ee,se]=s.useState([]),[te,ae]=s.useState([]),[ie,ne]=s.useState([]),[le,re]=s.useState(!1),[ce,oe]=s.useState(""),[de,me]=s.useState(""),[ue,he]=s.useState(null),[xe,ge]=s.useState({siteName:"",siteDescription:"",contactEmail:"",supportEmail:"",maintenanceMode:!1,registrationEnabled:!0,defaultCurrency:"INR",defaultLanguage:"en",timezone:"Asia/Kolkata"}),[pe,ye]=s.useState({emailNotifications:!0,smsNotifications:!0,pushNotifications:!0,adminAlerts:!0,systemAlerts:!0,userActivityAlerts:!1,marketingEmails:!0,weeklyReports:!0}),[je,fe]=s.useState({sessionTimeout:30,passwordMinLength:8,maxLoginAttempts:5,requireEmailVerification:!0,requirePhoneVerification:!1,allowPasswordReset:!0,autoLockAccount:!0,ipWhitelisting:!1}),[ve,Ne]=s.useState({currency:"INR",taxRate:18,processingFee:2.5,refundPolicy:"7 days",autoRefund:!1,paymentMethods:["card","upi","netbanking"],minimumAmount:100,maximumAmount:1e6}),[Se,we]=s.useState({backupEnabled:!0,backupFrequency:"daily",backupRetention:30,maintenanceWindow:"02:00-04:00",debugMode:!1,logLevel:"info",performanceMode:"balanced"}),[be,ke]=s.useState({emailProvider:"smtp",emailApiKey:"",smsProvider:"twilio",smsApiKey:"",paymentGateway:"razorpay",paymentApiKey:"",googleMapsApiKey:"",cloudinaryApiKey:"",firebaseConfig:{apiKey:"",authDomain:"",projectId:""}}),[Ae,Ce]=s.useState({defaultCountry:"India",defaultState:"Karnataka",defaultDistrict:"Bangalore",defaultCity:"Bangalore",enableLocationAutodetection:!0,locationDataSource:"loca",radiusUnit:"km",defaultRadius:25});s.useEffect(()=>{Fe(),Ee()},[]);const Ee=async()=>{try{re(!0),await n.initialize();const e=n.getStates();se(e)}catch(e){}finally{re(!1)}};s.useEffect(()=>{if(Ae.defaultState&&ee.length>0){const e=n.getDistricts(Ae.defaultState);ae(e)}},[Ae.defaultState,ee]),s.useEffect(()=>{if(Ae.defaultState&&Ae.defaultDistrict&&te.length>0){const e=n.getCities(Ae.defaultState,Ae.defaultDistrict);ne(e)}},[Ae.defaultState,Ae.defaultDistrict,te]);const Fe=async()=>{try{a(!0);const e=await q.getSettings();e.success&&(H(e.data.settings),ge(e.data.settings.general),ye(e.data.settings.notifications),fe(e.data.settings.security),Ne(e.data.settings.payment),e.data.settings.system&&we(e.data.settings.system),e.data.settings.integrations&&ke({...be,...e.data.settings.integrations}),e.data.settings.location&&Ce(s=>({...s,...e.data.settings.location})),Z({general:!1,notifications:!1,security:!1,payment:!1,system:!1,integrations:!1,location:!1}))}catch(e){}finally{a(!1)}},Pe=async(e,s,t)=>{try{await q.syncSettingRealtime(e,s,t),X((new Date).toISOString())}catch(a){}},Re=async e=>{const s={general:xe,notifications:pe,security:je,payment:ve,system:Se,integrations:be,location:Ae},t=q.validateSettings(e,s[e]);if(t.isValid)try{B(s=>({...s,[e]:!0}));const t=await q.updateSettings({category:e,settings:s[e]});t.success&&(H(t.data.settings),Z(s=>({...s,[e]:!1})),i({title:"Success",description:`${e.charAt(0).toUpperCase()+e.slice(1)} settings saved successfully!`}))}catch(a){}finally{B(s=>({...s,[e]:!1}))}else i({title:"Validation Error",description:t.errors.join(", "),variant:"destructive"})},Me=async e=>{try{W(s=>({...s,[`${e}_integration`]:!0})),await q.testIntegration(e)}catch(s){}finally{W(s=>({...s,[`${e}_integration`]:!1}))}},Te=e=>{Z(s=>({...s,[e]:!0}))};return t?e.jsx("div",{className:"container mx-auto p-6 space-y-6 relative top-[60px]",children:e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(l,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{className:"text-lg",children:"Loading settings..."})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6 relative top-[60px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure system-wide settings and preferences"})]})]}),e.jsxs(c,{variant:"outline",onClick:async()=>{U(!0),await Fe(),U(!1),i({title:"Settings Refreshed",description:"Settings have been refreshed successfully."})},disabled:O,className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 "+(O?"animate-spin":"")}),"Refresh"]})]}),Object.values(Y).some(Boolean)&&e.jsxs(R,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(M,{children:"You have unsaved changes. Don't forget to save your settings before leaving this page."})]}),e.jsxs(o,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(d,{className:"grid w-full grid-cols-4",children:[e.jsxs(m,{value:"general",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"General"]}),e.jsxs(m,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(m,{value:"security",className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Security"]}),e.jsxs(m,{value:"location",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Location"]})]}),e.jsx(x,{value:"general",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"General Settings"]}),e.jsx(j,{children:"Manage your website's basic information and general settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"siteName",children:"Site Name"}),e.jsx(N,{id:"siteName",value:xe.siteName,onChange:e=>{ge(s=>({...s,siteName:e.target.value})),Te("general")}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(N,{id:"contactEmail",type:"email",value:xe.contactEmail,onChange:e=>{ge(s=>({...s,contactEmail:e.target.value})),Te("general")}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"siteDescription",children:"Site Description"}),e.jsx(N,{id:"siteDescription",value:xe.siteDescription,onChange:e=>{ge(s=>({...s,siteDescription:e.target.value})),Te("general")}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"supportEmail",children:"Support Email"}),e.jsx(N,{id:"supportEmail",type:"email",value:xe.supportEmail,onChange:e=>{ge(s=>({...s,supportEmail:e.target.value})),Te("general")}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultCurrency",children:"Default Currency"}),e.jsx(N,{id:"defaultCurrency",value:"INR (â‚¹)",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultLanguage",children:"Default Language"}),e.jsx(N,{id:"defaultLanguage",value:"English",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"timezone",children:"Timezone"}),e.jsx(N,{id:"timezone",value:"India (IST)",disabled:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("general"),disabled:t,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})})]})]})}),e.jsx(x,{value:"notifications",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Notification Settings"]}),e.jsx(j,{children:"Configure how and when notifications are sent to users and administrators."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"emailNotifications",children:"Email Notifications"}),e.jsx(F,{id:"emailNotifications",checked:pe.emailNotifications,onCheckedChange:e=>{ye(s=>({...s,emailNotifications:e})),Te("notifications")}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"adminAlerts",children:"Admin Alerts"}),e.jsx(F,{id:"adminAlerts",checked:pe.adminAlerts,onCheckedChange:e=>{ye(s=>({...s,adminAlerts:e})),Te("notifications")}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"systemAlerts",children:"System Alerts"}),e.jsx(F,{id:"systemAlerts",checked:pe.systemAlerts,onCheckedChange:e=>{ye(s=>({...s,systemAlerts:e})),Te("notifications")}})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("notifications"),disabled:t,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]})})]})]})}),e.jsx(x,{value:"security",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Security Settings"]}),e.jsx(j,{children:"Configure security policies and authentication requirements."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),e.jsx(N,{id:"sessionTimeout",type:"number",value:je.sessionTimeout,onChange:e=>{fe(s=>({...s,sessionTimeout:parseInt(e.target.value)})),Te("security")}})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),e.jsx(N,{id:"maxLoginAttempts",type:"number",min:"3",max:"10",value:je.maxLoginAttempts,onChange:e=>{fe(s=>({...s,maxLoginAttempts:parseInt(e.target.value)})),Te("security"),Pe("security","maxLoginAttempts",parseInt(e.target.value))}}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["After ",je.maxLoginAttempts," failed login attempts, users will be locked out for 30 minutes or must reset their password. This setting applies dynamically to all user types."]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Authentication"}),e.jsx("div",{className:"space-y-4"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("security"),disabled:t,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save Security Settings"]})})]})]})}),e.jsx(x,{value:"payment",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Payment Settings"]}),e.jsx(j,{children:"Configure payment processing and billing settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"currency",children:"Default Currency"}),e.jsx(N,{id:"currency",value:ve.currency,onChange:e=>Ne(s=>({...s,currency:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(N,{id:"taxRate",type:"number",step:"0.1",value:ve.taxRate,onChange:e=>Ne(s=>({...s,taxRate:parseFloat(e.target.value)}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"processingFee",children:"Processing Fee (%)"}),e.jsx(N,{id:"processingFee",type:"number",step:"0.1",value:ve.processingFee,onChange:e=>Ne(s=>({...s,processingFee:parseFloat(e.target.value)}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"refundPolicy",children:"Refund Policy"}),e.jsx(N,{id:"refundPolicy",value:ve.refundPolicy,onChange:e=>Ne(s=>({...s,refundPolicy:e.target.value}))})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Automation"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"autoRefund",children:"Automatic Refunds"}),e.jsx(F,{id:"autoRefund",checked:ve.autoRefund,onCheckedChange:e=>Ne(s=>({...s,autoRefund:e}))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("payment"),disabled:V.payment,children:[V.payment?e.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save Payment Settings"]})})]})]})}),e.jsx(x,{value:"system",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5"}),"System Settings"]}),e.jsx(j,{children:"Configure system maintenance, backups, and performance settings."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Backup Configuration"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"backupEnabled",children:"Enable Automatic Backups"}),e.jsx(F,{id:"backupEnabled",checked:Se.backupEnabled,onCheckedChange:e=>{we(s=>({...s,backupEnabled:e})),Te("system"),Pe("system","backupEnabled",e)}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"backupFrequency",children:"Backup Frequency"}),e.jsxs(w,{value:Se.backupFrequency,onValueChange:e=>{we(s=>({...s,backupFrequency:e})),Te("system"),Pe("system","backupFrequency",e)},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"daily",children:"Daily"}),e.jsx(C,{value:"weekly",children:"Weekly"}),e.jsx(C,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"backupRetention",children:"Backup Retention (days)"}),e.jsx(N,{id:"backupRetention",type:"number",min:"1",max:"365",value:Se.backupRetention,onChange:e=>{const s=parseInt(e.target.value);we(e=>({...e,backupRetention:s})),Te("system")}})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"System Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"performanceMode",children:"Performance Mode"}),e.jsxs(w,{value:Se.performanceMode,onValueChange:e=>{we(s=>({...s,performanceMode:e})),Te("system"),Pe("system","performanceMode",e)},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"balanced",children:"Balanced"}),e.jsx(C,{value:"performance",children:"High Performance"}),e.jsx(C,{value:"memory",children:"Memory Optimized"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"logLevel",children:"Log Level"}),e.jsxs(w,{value:Se.logLevel,onValueChange:e=>{we(s=>({...s,logLevel:e})),Te("system"),Pe("system","logLevel",e)},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"error",children:"Error Only"}),e.jsx(C,{value:"warn",children:"Warnings"}),e.jsx(C,{value:"info",children:"Information"}),e.jsx(C,{value:"debug",children:"Debug"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"maintenanceWindow",children:"Maintenance Window"}),e.jsx(N,{id:"maintenanceWindow",value:Se.maintenanceWindow,onChange:e=>{we(s=>({...s,maintenanceWindow:e.target.value})),Te("system")},placeholder:"e.g., 02:00-04:00"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{htmlFor:"debugMode",children:"Debug Mode"}),e.jsx(F,{id:"debugMode",checked:Se.debugMode,onCheckedChange:e=>{we(s=>({...s,debugMode:e})),Te("system"),Pe("system","debugMode",e)}})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(c,{variant:"outline",onClick:()=>(async e=>{try{B(s=>({...s,[`${e}_reset`]:!0}));const s=await q.resetSettings(e);if(s.success){switch(H(s.data.settings),e){case"general":ge(s.data.settings.general);break;case"notifications":ye(s.data.settings.notifications);break;case"security":fe(s.data.settings.security);break;case"payment":Ne(s.data.settings.payment);break;case"system":s.data.settings.system&&we(s.data.settings.system);break;case"integrations":s.data.settings.integrations&&ke({...be,...s.data.settings.integrations});break;case"location":s.data.settings.location&&Ce(s.data.settings.location)}Z(s=>({...s,[e]:!1}))}}catch(s){}finally{B(s=>({...s,[`${e}_reset`]:!1}))}})("system"),disabled:V.system_reset,children:[V.system_reset?e.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx($,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),e.jsxs(c,{onClick:()=>Re("system"),disabled:V.system,children:[V.system?e.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save System Settings"]})]})]})]})}),e.jsx(x,{value:"integrations",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Integration Settings"]}),e.jsx(j,{children:"Configure third-party service integrations and API keys."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Email Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"emailProvider",children:"Email Provider"}),e.jsxs(w,{value:be.emailProvider,onValueChange:e=>{ke(s=>({...s,emailProvider:e})),Te("integrations")},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"smtp",children:"SMTP"}),e.jsx(C,{value:"sendgrid",children:"SendGrid"}),e.jsx(C,{value:"aws-ses",children:"AWS SES"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"emailApiKey",children:"Email API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{id:"emailApiKey",type:"password",value:be.emailApiKey,onChange:e=>{ke(s=>({...s,emailApiKey:e.target.value})),Te("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("email"),disabled:G.email_integration,children:G.email_integration?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h5",{className:"text-sm font-medium mb-4 text-gray-700",children:"Email Testing & Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"testEmail",children:"Test Email Address"}),e.jsx(N,{id:"testEmail",type:"email",value:ce,onChange:e=>oe(e.target.value),placeholder:"Enter email to test"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"emailTemplate",children:"Email Template"}),e.jsxs(w,{value:de,onValueChange:me,children:[e.jsx(b,{children:e.jsx(k,{placeholder:"Select template"})}),e.jsxs(A,{children:[e.jsx(C,{value:"welcome",children:"Welcome Email"}),e.jsx(C,{value:"password-reset",children:"Password Reset"}),e.jsx(C,{value:"vendor-welcome",children:"Vendor Welcome"}),e.jsx(C,{value:"customer-booking-confirmation",children:"Booking Confirmation"}),e.jsx(C,{value:"service-status-update",children:"Service Update"}),e.jsx(C,{value:"weekly-report",children:"Weekly Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{try{W(e=>({...e,email_connection:!0}));const e=await fetch("/api/admin/email/test-connection",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),s=await e.json();s.success?i({title:"Email Connection Test",description:"Email connection successful!"}):i({title:"Email Connection Failed",description:`Email connection failed: ${s.error}`,variant:"destructive"})}catch(e){i({title:"Connection Test Failed",description:"Failed to test email connection",variant:"destructive"})}finally{W(e=>({...e,email_connection:!1}))}},disabled:G.email_connection,children:G.email_connection?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(T,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{if(ce&&de)try{W(e=>({...e,send_test_email:!0}));const e=await fetch("/api/admin/email/send-test",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({to:ce,templateName:de})}),s=await e.json();s.success?i({title:"Test Email Sent",description:`Test email sent successfully to ${ce}`}):i({title:"Email Send Failed",description:`Failed to send test email: ${s.error}`,variant:"destructive"})}catch(e){i({title:"Email Send Failed",description:"Failed to send test email",variant:"destructive"})}finally{W(e=>({...e,send_test_email:!1}))}else i({title:"Missing Information",description:"Please enter email address and select template",variant:"destructive"})},disabled:G.send_test_email||!ce||!de,children:G.send_test_email?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(E,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:async()=>{try{const e=await fetch("/api/admin/email/stats",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),s=await e.json();s.success?(he(s.stats),i({title:"Email Statistics",description:"Email stats loaded successfully"})):i({title:"Stats Load Failed",description:`Failed to get email stats: ${s.error}`,variant:"destructive"})}catch(e){i({title:"Stats Load Failed",description:"Failed to get email stats",variant:"destructive"})}},children:e.jsx(z,{className:"h-4 w-4"})})]})]})]}),ue&&e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-md border",children:[e.jsx("h6",{className:"text-xs font-medium text-gray-600 mb-2",children:"Email Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{children:["Sent: ",e.jsx("strong",{children:ue.sent})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsxs("span",{children:["Failed: ",e.jsx("strong",{children:ue.failed})]})]})]})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"SMS Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"smsProvider",children:"SMS Provider"}),e.jsxs(w,{value:be.smsProvider,onValueChange:e=>{ke(s=>({...s,smsProvider:e})),Te("integrations")},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"twilio",children:"Twilio"}),e.jsx(C,{value:"aws-sns",children:"AWS SNS"}),e.jsx(C,{value:"firebase",children:"Firebase"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"smsApiKey",children:"SMS API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{id:"smsApiKey",type:"password",value:be.smsApiKey,onChange:e=>{ke(s=>({...s,smsApiKey:e.target.value})),Te("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("sms"),disabled:G.sms_integration,children:G.sms_integration?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Payment Gateway"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"paymentGateway",children:"Payment Provider"}),e.jsxs(w,{value:be.paymentGateway,onValueChange:e=>{ke(s=>({...s,paymentGateway:e})),Te("integrations")},children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(A,{children:[e.jsx(C,{value:"razorpay",children:"Razorpay"}),e.jsx(C,{value:"stripe",children:"Stripe"}),e.jsx(C,{value:"paypal",children:"PayPal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"paymentApiKey",children:"Payment API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{id:"paymentApiKey",type:"password",value:be.paymentApiKey,onChange:e=>{ke(s=>({...s,paymentApiKey:e.target.value})),Te("integrations")},placeholder:"Enter API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("payment"),disabled:G.payment_integration,children:G.payment_integration?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Other Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"googleMapsApiKey",children:"Google Maps API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{id:"googleMapsApiKey",type:"password",value:be.googleMapsApiKey,onChange:e=>{ke(s=>({...s,googleMapsApiKey:e.target.value})),Te("integrations")},placeholder:"Enter Google Maps API key..."}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Me("maps"),disabled:G.maps_integration,children:G.maps_integration?e.jsx(l,{className:"h-4 w-4 animate-spin"}):e.jsx(_,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"cloudinaryApiKey",children:"Cloudinary API Key"}),e.jsx(N,{id:"cloudinaryApiKey",type:"password",value:be.cloudinaryApiKey,onChange:e=>{ke(s=>({...s,cloudinaryApiKey:e.target.value})),Te("integrations")},placeholder:"Enter Cloudinary API key..."})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("integrations"),disabled:V.integrations,children:[V.integrations?e.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save Integration Settings"]})})]})]})}),e.jsx(x,{value:"location",children:e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Location Settings"]}),e.jsx(j,{children:"Configure default location settings and location data sources."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Default Location"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set default location for the platform using the integrated location service (loca.json)."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultCountry",children:"Default Country"}),e.jsx(N,{id:"defaultCountry",value:"India",disabled:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultState",children:"Default State"}),e.jsxs(w,{value:Ae.defaultState,onValueChange:e=>{Ce(s=>({...s,defaultState:e,defaultDistrict:"",defaultCity:""})),Te("location"),Pe("location","defaultState",e)},disabled:le||0===ee.length,children:[e.jsx(b,{children:e.jsx(k,{placeholder:le?"Loading states...":"Select state"})}),e.jsx(A,{children:ee.map(s=>e.jsx(C,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultDistrict",children:"Default District"}),e.jsxs(w,{value:Ae.defaultDistrict,onValueChange:e=>{Ce(s=>({...s,defaultDistrict:e,defaultCity:""})),Te("location"),Pe("location","defaultDistrict",e)},disabled:!Ae.defaultState||0===te.length,children:[e.jsx(b,{children:e.jsx(k,{placeholder:Ae.defaultState?"Select district":"Select state first"})}),e.jsx(A,{children:te.map(s=>e.jsx(C,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"defaultCity",children:"Default City"}),e.jsxs(w,{value:Ae.defaultCity,onValueChange:e=>{Ce(s=>({...s,defaultCity:e})),Te("location"),Pe("location","defaultCity",e)},disabled:!Ae.defaultDistrict||0===ie.length,children:[e.jsx(b,{children:e.jsx(k,{placeholder:Ae.defaultDistrict?"Select city":"Select district first"})}),e.jsx(A,{children:ie.map(s=>e.jsx(C,{value:s,children:s},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Powered by loca.json service"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{onClick:()=>Re("location"),disabled:V.location,children:[V.location?e.jsx(l,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save Location Settings"]})})]})]})})]})]})};export{V as default};
