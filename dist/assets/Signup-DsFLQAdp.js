import{j as e}from"./ui-CMGlPv8M.js";import{d as b,r as l}from"./router-02yfTqxa.js";import{N as P,L as a,I as o,f as u,F as S,t as c,A as g}from"./index-DGiQKbnC.js";import{I as C,a as O,b as d}from"./input-otp-DDLYfRz_.js";import"./vendor-Dazix4UH.js";const T="/assets/reg-pg-2zN6ULKb.png",F=()=>e.jsx("div",{className:"w-full h-auto flex items-center justify-center",children:e.jsx("img",{src:T,alt:"Signup Illustration",className:"w-full h-auto max-w-4xl"})}),B=()=>{const j=b(),[x,h]=l.useState("form"),[p,f]=l.useState(""),[m,i]=l.useState(!1),[E,N]=l.useState(0),[L,R]=l.useState(!0),[s,n]=l.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),v=async t=>{if(t.preventDefault(),!s.firstName||!s.lastName||!s.email||!s.phone||!s.password||!s.confirmPassword){c({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}if(s.password!==s.confirmPassword){c({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(s.password.length<6){c({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}if(!/^\d{10}$/.test(s.phone)){c({title:"Error",description:"Please enter a valid 10-digit phone number",variant:"destructive"});return}i(!0);try{const r=await g.sendOTP(s.email,s.firstName);r.success&&(h("otp"),N(r.expiryMinutes||10))}catch(r){console.error("OTP sending error:",r)}finally{i(!1)}},w=async t=>{if(t.preventDefault(),p.length!==6){c({title:"Error",description:"Please enter the 6-digit OTP",variant:"destructive"});return}i(!0);try{(await g.register({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,phone:s.phone,role:"customer",agreeToTerms:!0,otp:p})).success&&(h("success"),c({title:"Registration Successful!",description:"Your account has been created successfully. Redirecting to login..."}),setTimeout(()=>{j("/login")},3e3))}catch(r){console.error("Registration error:",r),f("")}finally{i(!1)}},y=async()=>{try{i(!0),await g.sendOTP(s.email,s.firstName),f("")}catch(t){console.error("Resend OTP error:",t)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(P,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-12 bg-gradient-to-br from-background to-accent/10",children:e.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("div",{className:"w-full h-auto rounded-2xl shadow-2xl bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden",children:e.jsx(F,{})})}),e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-card rounded-2xl shadow-xl p-8 border",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Account"}),e.jsx("p",{className:"text-muted-foreground",children:x==="form"?"Sign up to get started with BuildHomeMart":"Enter the OTP sent to your email"})]}),x==="form"?e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"firstName",children:"First Name *"}),e.jsx(o,{id:"firstName",type:"text",placeholder:"First name",value:s.firstName,onChange:t=>n({...s,firstName:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(o,{id:"lastName",type:"text",placeholder:"Last name",value:s.lastName,onChange:t=>n({...s,lastName:t.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"email",children:"Email *"}),e.jsx(o,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:t=>n({...s,email:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(o,{id:"phone",type:"tel",placeholder:"10-digit phone number",value:s.phone,onChange:t=>n({...s,phone:t.target.value.replace(/\D/g,"").slice(0,10)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"password",children:"Password *"}),e.jsx(o,{id:"password",type:"password",placeholder:"Create a password",value:s.password,onChange:t=>n({...s,password:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(o,{id:"confirmPassword",type:"password",placeholder:"Re-enter your password",value:s.confirmPassword,onChange:t=>n({...s,confirmPassword:t.target.value}),required:!0})]}),e.jsx(u,{type:"submit",className:"w-full",size:"lg",disabled:m,children:m?"Creating Account...":"Create Account"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-primary font-medium hover:underline",children:"Sign in"})]})]}):x==="otp"?e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{className:"text-center block",children:"Enter 6-Digit OTP"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(C,{maxLength:6,value:p,onChange:t=>f(t),children:e.jsxs(O,{children:[e.jsx(d,{index:0}),e.jsx(d,{index:1}),e.jsx(d,{index:2}),e.jsx(d,{index:3}),e.jsx(d,{index:4}),e.jsx(d,{index:5})]})})}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["OTP sent to ",s.email]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{type:"submit",className:"w-full",size:"lg",disabled:m,children:m?"Verifying...":"Register"}),e.jsx(u,{type:"button",variant:"outline",className:"w-full",onClick:y,disabled:m,children:"Resend OTP"}),e.jsx(u,{type:"button",variant:"ghost",className:"w-full",onClick:()=>h("form"),children:"Back to Form"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["For demo: Use OTP ",e.jsx("span",{className:"font-mono font-semibold",children:"123456"})]})]}):x==="success"?e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"Account Created Successfully!"}),e.jsx("p",{className:"text-muted-foreground",children:"Your account has been created and email verified. Redirecting to login page..."})]}),e.jsx(u,{onClick:()=>j("/login"),className:"w-full",children:"Continue to Login"})]}):null]})})]})}),e.jsx(S,{})]})};export{B as default};
