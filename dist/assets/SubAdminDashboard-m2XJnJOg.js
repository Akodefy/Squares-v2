import{j as e}from"./ui-CMGlPv8M.js";import{r as n}from"./router-02yfTqxa.js";import{a1 as u,aK as c,a as t,b as r,c as d,q as g,e as i,U as f,C as N,n as o,d as x}from"./index-DGiQKbnC.js";import{s as v}from"./subAdminService-DHodMgo_.js";import"./vendor-Dazix4UH.js";const k=()=>{const[s,m]=n.useState(null),[p,h]=n.useState(!0),{toast:j}=u();n.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await v.getDashboardStats();m(l)}catch(l){j({title:"Error",description:l.message||"Failed to fetch dashboard stats",variant:"destructive"})}finally{h(!1)}};return c("property_created",()=>{a()}),c("property_approved",()=>{a()}),c("property_rejected",()=>{a()}),c("support_ticket_created",()=>{a()}),c("support_ticket_updated",()=>{a()}),p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Sub Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Content moderation and support management overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(l=>e.jsx(t,{children:e.jsxs(r,{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},l))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Sub Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Content moderation and support management overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.totalProperties||0}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-green-600",children:[s?.availableProperties||0," Available"]}),e.jsxs("p",{className:"text-xs text-yellow-600",children:[s?.pendingProperties||0," Pending"]}),e.jsxs("p",{className:"text-xs text-red-600",children:[s?.rejectedProperties||0," Rejected"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.totalUsers||0}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-blue-600",children:[s?.vendorUsers||0," Vendors"]}),e.jsxs("p",{className:"text-xs text-purple-600",children:[s?.customerUsers||0," Customers"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.totalViews?.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Property page views"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Support Tickets"}),e.jsx(o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.totalSupport||0}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-orange-600",children:[s?.openSupport||0," Open"]}),e.jsxs("p",{className:"text-xs text-green-600",children:[s?.resolvedSupport||0," Resolved"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(d,{children:"Quick Actions"}),e.jsx(x,{children:"Common tasks for content moderation"})]}),e.jsxs(i,{className:"space-y-2",children:[e.jsxs("a",{href:"/subadmin/property-reviews",className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Review Properties"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s?.pendingProperties," properties awaiting approval"]})]}),e.jsxs("a",{href:"/subadmin/support-tickets",className:"block p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Handle Support"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s?.openSupport," open tickets"]})]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(d,{children:"Recent Activity"}),e.jsx(x,{children:"Latest content moderation activities"})]}),e.jsx(i,{children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(o,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No recent activity to display"})]})})]})]})]})};export{k as default};
