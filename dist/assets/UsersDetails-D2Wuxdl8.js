import{j as e}from"./ui-CMGlPv8M.js";import{d as S,r as n}from"./router-02yfTqxa.js";import{G as A,A as E,t as M,f as p,D as F,a as c,b as i,c as o,e as d,J as I,I as T,K as $}from"./index-DGiQKbnC.js";import{D as B}from"./download-Dx_JF_-F.js";import"./vendor-Dazix4UH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=A("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),q=()=>{const g=S(),[m,N]=n.useState([]),[h,u]=n.useState([]),[v,y]=n.useState(!0),[l,U]=n.useState(""),[x,b]=n.useState({totalUsers:0,thisMonthUsers:0,activeUsers:0,vendorUsers:0,customerUsers:0});n.useEffect(()=>{w()},[]),n.useEffect(()=>{if(l){const s=m.filter(r=>r.email.toLowerCase().includes(l.toLowerCase())||`${r.profile.firstName} ${r.profile.lastName}`.toLowerCase().includes(l.toLowerCase())||r.role.toLowerCase().includes(l.toLowerCase()));u(s)}else u(m)},[l,m]);const w=async()=>{try{const s=E.getToken(),r=await fetch("https://api.akodefy.com/api/users/all",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch users data");const f=await r.json();if(f.success){const a=f.data.users.filter(t=>!["admin","superadmin","subadmin"].includes(t.role));N(a),u(a);const j=new Date,k=new Date(j.getFullYear(),j.getMonth(),1),L=a.filter(t=>new Date(t.createdAt)>=k).length;b({totalUsers:a.length,thisMonthUsers:L,activeUsers:a.filter(t=>t.status==="active").length,vendorUsers:a.filter(t=>t.role==="vendor").length,customerUsers:a.filter(t=>t.role==="customer").length})}}catch(s){console.error("Error fetching users data:",s),M({title:"Error",description:"Failed to load users data",variant:"destructive"})}finally{y(!1)}},C=s=>new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),D=s=>{switch(s){case"vendor":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return v?e.jsx("div",{className:"flex justify-center items-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(p,{variant:"ghost",onClick:()=>g("/admin/dashboard"),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Users Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete user list and statistics (excluding admins)"})]}),e.jsxs(p,{variant:"outline",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Export Users"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(c,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Users"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.totalUsers})})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.thisMonthUsers})})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Active Users"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:x.activeUsers})})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Vendors"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.vendorUsers})})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Customers"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.customerUsers})})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"Search users by name, email, or role...",value:l,onChange:s=>U(s.target.value),className:"pl-10"})]})}),e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(o,{children:["All Users (",h.length,")"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No users found"}):h.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("p",{className:"font-medium",children:[s.profile.firstName," ",s.profile.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email}),s.profile.phone&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.profile.phone})]}),e.jsx("div",{children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${D(s.role)}`,children:s.role})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Joined"}),e.jsx("p",{className:"text-sm",children:C(s.createdAt)})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm text-red-600",children:"Inactive"})]})})]})},s._id))})})]})]})};export{q as default};
