import{j as e}from"./ui-DHQhougw.js";import{R as s,r as i}from"./router-Bi51YGN-.js";import{a as t,b as a,c as r,am as n,e as l,M as o,ag as c,B as d,U as p,l as m,t as f,v as x,f as u,q as h,Z as j,ak as g,a8 as v,a9 as N,aa as y,L as b,I as w,P as C,as as k,a5 as S,a6 as P,a7 as I,al as E,T as R,S as M,m as U,n as F,o as T,p as A,C as V,k as B}from"./index-Bu7cQZk6.js";import{vendorService as L}from"./vendorService-D-qa1QbJ.js";import{m as q}from"./messageService-CY3EwjlD.js";import{P as z}from"./PincodeAutocomplete-DUkwqaax.js";import{P as _}from"./PasswordChangeDialog-DavdI-gA.js";import{S as D}from"./switch-CFuQAvL-.js";import{S as O}from"./separator-Cc6m3zXA.js";import{G as $}from"./globe-BTeuAI4G.js";import{T as G}from"./trending-up-BY108nQy.js";import{C as J}from"./circle-alert-BRbSeU_O.js";import{u as W}from"./uploadService-Bwy6d1dt.js";import{u as H}from"./use-mobile-WsBtvUz6.js";import{S as Y}from"./square-pen-CfzR_07H.js";import{C as K}from"./camera-C_o8JeQI.js";import{C as Q}from"./calendar-C3kuatT3.js";import{K as Z}from"./key-BIVETyoX.js";import{S as X}from"./shield-CBkWNUlC.js";import"./vendor-eVk5PToZ.js";import"./reviewsService-Cty1tRw9.js";import"./command-CII4kP9G.js";import"./alert-C4uLZiHe.js";import"./input-otp-BxS5h-Sg.js";import"./triangle-alert-DTRiB9Q_.js";import"./eye-off-BgG-cuLe.js";const ee=({preferences:i,businessPreferences:m,onChange:f,onBusinessChange:x,onTestPushNotification:u,onTestEmail:h,showTestButtons:j=!1,supportEmail:g="support@buildhomemartsquares.com"})=>{const v=[{key:"email",icon:o,color:"text-blue-500",title:"Email Notifications",description:"Receive updates and alerts via email",isCore:!0},{key:"push",icon:n,color:"text-purple-500",title:"Push Notifications",description:"Browser notifications for instant updates",isCore:!0},{key:"newMessages",icon:c,color:"text-indigo-500",title:"New Message Alerts",description:"Get notified when you receive new messages from customers",requiresEmail:!0},{key:"newsUpdates",icon:$,color:"text-teal-500",title:"News & Updates",description:"Real estate market news and platform updates",requiresEmail:!0},{key:"marketing",icon:G,color:"text-green-500",title:"Marketing Communications",description:"Platform announcements and promotional content",requiresEmail:!0}],N=[{key:"emailNotifications",icon:o,color:"text-blue-600",title:"Business Email Notifications",description:"General business communications and updates",isCore:!0},{key:"weeklyReports",icon:G,color:"text-purple-600",title:"Weekly Reports",description:"Weekly performance reports and analytics",requiresBusiness:!0},{key:"marketingEmails",icon:G,color:"text-pink-600",title:"Marketing Emails",description:"Business growth tips and marketing opportunities",requiresBusiness:!0}],y=e=>e.requiresEmail&&!i.email,b=e=>e.requiresBusiness&&!m.emailNotifications;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-5 h-5"}),"General Notification Preferences"]})}),e.jsx(l,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:v.map((t,a)=>e.jsxs(s.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{className:`w-5 h-5 ${t.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:t.title}),t.isCore&&e.jsx(d,{variant:"outline",className:"text-xs",children:"Core"}),y(t)&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Requires Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),y(t)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(J,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable email notifications first"})]})]})]}),e.jsx(D,{checked:i[t.key],onCheckedChange:e=>f(t.key,e),disabled:y(t)})]}),a<v.length-1&&e.jsx(O,{})]},t.key))})})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Business Notification Preferences"]})}),e.jsx(l,{className:"space-y-6",children:e.jsx("div",{className:"space-y-4",children:N.map((i,t)=>e.jsxs(s.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.icon,{className:`w-5 h-5 ${i.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:i.title}),i.isCore&&e.jsx(d,{variant:"outline",className:"text-xs",children:"Core"}),b(i)&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Requires Business Email"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),b(i)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(J,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Enable business email notifications first"})]})]})]}),e.jsx(D,{checked:m[i.key],onCheckedChange:e=>x(i.key,e),disabled:b(i)})]}),t<N.length-1&&e.jsx(O,{})]},i.key))})})]})]})},se=()=>{const n=H(),[c,d]=i.useState(!1),[D,O]=i.useState(!0),[$,J]=i.useState(!1),[se,ie]=i.useState(null),[te,ae]=i.useState(null),[re,ne]=i.useState("profile"),[le,oe]=i.useState(null),[ce,de]=i.useState(!1),pe=s.useRef(null),[me,fe]=i.useState([]),[xe,ue]=i.useState([]),[he,je]=i.useState([]),[ge,ve]=i.useState({states:!1,districts:!1,cities:!1}),[Ne,ye]=i.useState({notifications:{email:!0,push:!0,newMessages:!0,newsUpdates:!0,marketing:!1},business:{emailNotifications:!0,smsNotifications:!1,leadAlerts:!0,marketingEmails:!1,weeklyReports:!0,autoResponseEnabled:!1,autoResponseMessage:"Thank you for your interest! I'll get back to you soon."}}),[be,we]=i.useState(!1),Ce=i.useCallback(async(e,s,i)=>{ye(t=>({...t,[e]:{...t[e],[s]:i}}))},[]);i.useEffect(()=>{(async()=>{try{ve(e=>({...e,states:!0})),await m.initialize();const e=m.getStates();fe(e),await Promise.all([ke(),Se()])}catch(e){}finally{ve(e=>({...e,states:!1}))}})()},[]),i.useEffect(()=>{if(!te?.profile?.address?.state)return void ue([]);const e=m.getDistricts(te.profile.address.state);ue(e)},[te?.profile?.address?.state]),i.useEffect(()=>{if(!te?.profile?.address?.state||!te?.profile?.address?.district)return void je([]);const e=m.getCities(te.profile.address.state,te.profile.address.district);je(e)},[te?.profile?.address?.state,te?.profile?.address?.district]),i.useEffect(()=>{if(D)return;const e=setTimeout(()=>{Pe()},1500);return()=>clearTimeout(e)},[Ne,D]);const ke=async()=>{try{O(!0);const e=await L.getVendorProfile(),s={...e,profile:{...e.profile,preferences:{language:e.profile.preferences?.language||"en",notifications:{email:e.profile.preferences?.notifications?.email??!0,push:e.profile.preferences?.notifications?.push??!0,newMessages:e.profile.preferences?.notifications?.newMessages??!0,newsUpdates:e.profile.preferences?.notifications?.newsUpdates??!0,marketing:e.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:e.profile.preferences?.privacy?.showEmail??!1,showPhone:e.profile.preferences?.privacy?.showPhone??!1,allowMessages:e.profile.preferences?.privacy?.allowMessages??!0}}}};ie(s),ae(s),localStorage.setItem("user",JSON.stringify(s))}catch(e){f({title:"Error",description:"Failed to load vendor profile. Please try again.",variant:"destructive"})}finally{O(!1)}},Se=async()=>{try{const s=localStorage.getItem("vendorSettings");if(s){const e=JSON.parse(s);ye(s=>({...s,...e}))}try{const e=await L.getVendorProfile();if(e&&e.profile.vendorInfo?.vendorPreferences){const s=e.profile.vendorInfo.vendorPreferences,i={notifications:{email:e.profile?.preferences?.notifications?.email||Ne.notifications.email,push:e.profile?.preferences?.notifications?.push||Ne.notifications.push,newMessages:e.profile?.preferences?.notifications?.newMessages||Ne.notifications.newMessages,newsUpdates:e.profile?.preferences?.notifications?.newsUpdates||Ne.notifications.newsUpdates,marketing:e.profile?.preferences?.notifications?.marketing||Ne.notifications.marketing},business:{emailNotifications:s.emailNotifications||Ne.business.emailNotifications,smsNotifications:s.smsNotifications||Ne.business.smsNotifications,leadAlerts:s.leadAlerts||Ne.business.leadAlerts,marketingEmails:s.marketingEmails||Ne.business.marketingEmails,weeklyReports:s.weeklyReports||Ne.business.weeklyReports,autoResponseEnabled:s.autoResponseEnabled||Ne.business.autoResponseEnabled,autoResponseMessage:s.autoResponseMessage||Ne.business.autoResponseMessage}};ye(i),localStorage.setItem("vendorSettings",JSON.stringify(i))}}catch(e){}}catch(s){f({title:"Settings Loaded",description:"Using saved settings.",variant:"default"})}},Pe=async()=>{try{J(!0);const s=Ie(Ne);s.isValid||f({title:"Validation Warning",description:s.message,variant:"default"});try{const e={profile:{preferences:{notifications:{email:Ne.notifications.email,push:Ne.notifications.push,newMessages:Ne.notifications.newMessages,newsUpdates:Ne.notifications.newsUpdates,marketing:Ne.notifications.marketing}},vendorInfo:{vendorPreferences:{emailNotifications:Ne.business.emailNotifications,smsNotifications:Ne.business.smsNotifications,leadAlerts:Ne.business.leadAlerts,marketingEmails:Ne.business.marketingEmails,weeklyReports:Ne.business.weeklyReports,autoResponseEnabled:Ne.business.autoResponseEnabled,autoResponseMessage:Ne.business.autoResponseMessage}}}};await L.updateVendorProfile(e),localStorage.setItem("vendorSettings",JSON.stringify(Ne)),oe((new Date).toISOString()),f({title:"Settings Saved",description:"Your preferences have been updated"})}catch(e){localStorage.setItem("vendorSettings",JSON.stringify(Ne)),f({title:"Settings Saved",description:"Your preferences have been saved",variant:"default"})}}catch(s){f({title:"Save Failed",description:s.message||"Unable to save vendor settings.",variant:"destructive"})}finally{J(!1)}},Ie=e=>!e.business.emailNotifications||e.business.leadAlerts||e.notifications.newMessages?e.business.autoResponseEnabled&&!e.business.autoResponseMessage.trim()?{isValid:!1,message:"Auto-response enabled but no message set. Please provide a response message."}:{isValid:!0,message:""}:{isValid:!1,message:"Business email enabled but no notification types selected. Consider enabling lead alerts or new message notifications."},Ee=async e=>{try{"inquiry"!==e.type&&"lead"!==e.type&&"property_inquiry"!==e.type||q.isAutoResponse(e)||await(async(e,s)=>{try{if(!Ne.business.autoResponseEnabled||!Ne.business.autoResponseMessage.trim())return;await q.sendAutoResponse(e,s,Ne.business.autoResponseMessage)}catch(i){}})(e.conversationId,e.sender._id)}catch(s){}};s.useEffect(()=>(Ne.business.autoResponseEnabled?window.vendorAutoResponseHandler=Ee:delete window.vendorAutoResponseHandler,()=>{delete window.vendorAutoResponseHandler}),[Ne.business.autoResponseEnabled,Ne.business.autoResponseMessage]);const Re=i.useCallback((e,s)=>{ae(i=>{if(!i)return i;const t=e.split("."),a={...i};let r=a;for(let e=0;e<t.length-1;e++)r[t[e]]||(r[t[e]]={}),r[t[e]]={...r[t[e]]},r=r[t[e]];return r[t[t.length-1]]=s,a})},[]);if(D)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading vendor profile..."})]})});if(!se||!te)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:"Failed to load vendor profile"}),e.jsx(u,{onClick:ke,children:"Retry"})]})});te.profile.firstName,te.profile.lastName;const Me=te.profile.vendorInfo?.memberSince?new Date(te.profile.vendorInfo.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex "+(n?"flex-col space-y-4":"justify-between items-center"),children:[e.jsxs("div",{children:[e.jsxs("h1",{className:(n?"text-2xl":"text-3xl")+" font-bold tracking-tight flex items-center gap-2",children:[e.jsx(h,{className:"w-8 h-8 text-primary"}),"My Profile"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile information and preferences."})]}),e.jsx("div",{className:"flex gap-2 "+(n?"w-full":""),children:c?e.jsxs(e.Fragment,{children:[e.jsxs(u,{variant:"outline",onClick:()=>{ae(se),d(!1)},disabled:$,className:n?"flex-1":"",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(u,{onClick:async()=>{if(te){(()=>{const e=te?.profile?.address;if(!e)return!0;if(e.zipCode&&e.state&&e.district&&e.city&&!m.getLocationByPincode(e.zipCode).some(s=>s.state.toUpperCase()===e.state?.toUpperCase()&&s.district.toUpperCase()===e.district?.toUpperCase()&&s.city.toUpperCase()===e.city?.toUpperCase()))return!1;return!0})()||f({title:"Location Validation",description:"Please verify that your PIN code matches the selected location",variant:"default"});try{J(!0);const e={profile:{firstName:te.profile.firstName,lastName:te.profile.lastName,phone:te.profile.phone,bio:te.profile.bio,preferences:{language:te.profile.preferences?.language||"en",notifications:{email:te.profile.preferences?.notifications?.email??!0,push:te.profile.preferences?.notifications?.push??!0,newMessages:te.profile.preferences?.notifications?.newMessages??!0,newsUpdates:te.profile.preferences?.notifications?.newsUpdates??!0,marketing:te.profile.preferences?.notifications?.marketing??!0},privacy:{showEmail:te.profile.preferences?.privacy?.showEmail??!1,showPhone:te.profile.preferences?.privacy?.showPhone??!1,allowMessages:te.profile.preferences?.privacy?.allowMessages??!0}},address:{...te.profile.address,street:te.profile.address?.street||"",state:te.profile.address?.state||"",district:te.profile.address?.district||"",city:te.profile.address?.city||"",zipCode:te.profile.address?.zipCode||"",country:te.profile.address?.country||"India"},vendorInfo:te.profile.vendorInfo}},s=await L.updateVendorProfile(e);ie(s),ae(s),d(!1),f({title:"Success",description:"Profile updated successfully!"})}catch(e){}finally{J(!1)}}},disabled:$,className:n?"flex-1":"",children:[$?e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(g,{className:"w-4 h-4 mr-2"}),"Save Profile"]})]}):e.jsxs(u,{onClick:()=>d(!0),className:n?"w-full":"",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start "+(n?"flex-col space-y-4":"space-x-6"),children:[e.jsxs("div",{className:"relative",children:[e.jsxs(v,{className:`${n?"h-20 w-20":"h-24 w-24"} ${n?"mx-auto":""}`,children:[e.jsx(N,{src:te.profile.avatar||void 0}),e.jsxs(y,{className:""+(n?"text-base":"text-lg"),children:[te.profile.firstName.charAt(0),te.profile.lastName.charAt(0)]})]}),e.jsx("input",{ref:pe,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:async e=>{const s=e.target.files?.[0];if(!s)return;const i=W.validateImageFile(s);if(i.valid)try{de(!0);const e=await W.compressImage(s),i=await W.uploadAvatar(e);if(te){const e=await L.updateVendorProfile({profile:{avatar:i}});ie(e),ae(e),f({title:"Success",description:"Profile picture updated successfully!"})}}catch(t){f({title:"Upload Failed",description:"Failed to upload profile picture. Please try again.",variant:"destructive"})}finally{de(!1),pe.current&&(pe.current.value="")}else f({title:"Invalid File",description:i.error,variant:"destructive"})},className:"hidden"}),e.jsx(u,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0 "+(n?"right-1/2 translate-x-1/2":""),onClick:()=>pe.current?.click(),disabled:ce,children:ce?e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(K,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:`grid grid-cols-1 ${n?"":"md:grid-cols-2"} gap-4`,children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"firstName",children:"First Name"}),c?e.jsx(w,{id:"firstName",value:te.profile.firstName,onChange:e=>Re("profile.firstName",e.target.value)}):e.jsx("p",{className:(n?"text-base":"text-lg")+" font-semibold",children:te.profile.firstName})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"lastName",children:"Last Name"}),c?e.jsx(w,{id:"lastName",value:te.profile.lastName,onChange:e=>Re("profile.lastName",e.target.value)}):e.jsx("p",{className:(n?"text-base":"text-lg")+" font-semibold",children:te.profile.lastName})]})]}),e.jsxs("div",{className:`flex items-center ${n?"flex-col space-y-2":"space-x-4"} text-sm text-muted-foreground`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"w-4 h-4 mr-1"}),te.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),c?e.jsx(w,{value:te.profile.phone,onChange:e=>Re("profile.phone",e.target.value),className:"h-6 text-sm w-32"}):te.profile.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),"Member since ",Me]})]}),e.jsxs("div",{className:"flex items-center "+(n?"flex-col space-y-2":"space-x-4"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 text-yellow-400 mr-1"}),e.jsx("span",{className:"font-medium",children:(te.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",te.profile.vendorInfo?.rating?.count||0," reviews)"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",children:[te.profile.vendorInfo?.responseTime||"Not calculated"," avg response"]})})]})]})]})})}),e.jsxs(S,{value:re,onValueChange:ne,className:"space-y-6",children:[e.jsxs(P,{className:""+(n?"flex flex-col h-auto gap-2":"grid w-full grid-cols-3"),children:[e.jsx(I,{value:"profile",className:n?"w-full justify-start":"",children:"Personal Info"}),e.jsx(I,{value:"company",className:n?"w-full justify-start":"",children:"Company Details"}),e.jsx(I,{value:"notifications",className:n?"w-full justify-start":"",children:"Settings"})]}),e.jsx(E,{value:"profile",className:"space-y-6",children:e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Personal Information"]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"bio",children:"Bio"}),c?e.jsx(R,{id:"bio",value:te.profile.bio||"",onChange:e=>Re("profile.bio",e.target.value),placeholder:"Tell us about yourself and your experience...",rows:4}):e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:te.profile.bio||"No bio provided"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"street",children:"Street Address"}),c?e.jsx(w,{id:"street",value:te.profile.address?.street||"",onChange:e=>Re("profile.address.street",e.target.value),placeholder:"Enter street address..."}):e.jsx("p",{className:"text-sm",children:te.profile.address?.street||"Not provided"})]}),c?e.jsxs("div",{children:[e.jsx(b,{className:"text-sm font-medium",children:"Location Details"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"state",children:"State"}),e.jsxs(M,{value:te.profile.address?.state||"",onValueChange:e=>{Re("profile.address.state",e),Re("profile.address.district",""),Re("profile.address.city",""),Re("profile.address.zipCode","")},disabled:ge.states,children:[e.jsx(U,{children:e.jsx(F,{placeholder:ge.states?"Loading states...":"Select state"})}),e.jsx(T,{children:me.map(s=>e.jsx(A,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"district",children:"District"}),e.jsxs(M,{value:te.profile.address?.district||"",onValueChange:e=>{Re("profile.address.district",e),Re("profile.address.city",""),Re("profile.address.zipCode","")},disabled:!te.profile.address?.state||ge.districts,children:[e.jsx(U,{children:e.jsx(F,{placeholder:te.profile.address?.state?ge.districts?"Loading districts...":"Select district":"Select state first"})}),e.jsx(T,{children:xe.map(s=>e.jsx(A,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"city",children:"City"}),e.jsxs(M,{value:te.profile.address?.city||"",onValueChange:e=>{Re("profile.address.city",e),Re("profile.address.zipCode","")},disabled:!te.profile.address?.district||ge.cities,children:[e.jsx(U,{children:e.jsx(F,{placeholder:te.profile.address?.district?ge.cities?"Loading cities...":"Select city":"Select district first"})}),e.jsx(T,{children:he.map(s=>e.jsx(A,{value:s,children:s},s))})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"State"}),e.jsx("p",{className:"text-sm",children:te.profile.address?.state||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"District"}),e.jsx("p",{className:"text-sm",children:te.profile.address?.district||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"City"}),e.jsx("p",{className:"text-sm",children:te.profile.address?.city||"Not provided"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"zipCode",children:"PIN Code"}),c?e.jsx(z,{value:te.profile.address?.zipCode||"",onChange:(e,s)=>{if(Re("profile.address.zipCode",e),s&&s.state){const e=s.state.toUpperCase();me.includes(e)&&(Re("profile.address.state",e),Re("profile.address.stateCode",e),setTimeout(()=>{const i=m.getDistricts(e);if(ue(i),s.district){const t=i.find(e=>e.toUpperCase()===s.district.toUpperCase());t&&(Re("profile.address.district",t),Re("profile.address.districtCode",t),setTimeout(()=>{const i=m.getCities(e,t);if(je(i),s.city){const e=i.find(e=>e.toUpperCase()===s.city.toUpperCase());e&&(Re("profile.address.city",e),Re("profile.address.cityCode",e))}},100))}},100))}},state:te.profile.address?.state,district:te.profile.address?.district,city:te.profile.address?.city,placeholder:te.profile.address?.city?`Enter PIN code for ${te.profile.address.city}...`:"Enter PIN code to auto-fill location...",className:"w-full"}):e.jsx("p",{className:"text-sm",children:te.profile.address?.zipCode||"Not provided"}),c&&e.jsxs("div",{className:"space-y-1 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"ðŸ’¡ Select your location first or enter PIN code to auto-fill location details"}),te.profile.address?.zipCode&&te.profile.address?.city&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),"Location validated with PIN code"]})]})]})]})]})]})}),e.jsx(E,{value:"company",className:"space-y-6",children:e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Company Information"]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"companyName",children:"Company Name"}),c?e.jsx(w,{id:"companyName",value:te.profile.vendorInfo?.companyName||"",onChange:e=>Re("profile.vendorInfo.companyName",e.target.value)}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.companyName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"businessType",children:"Business Type"}),c?e.jsxs(M,{value:te.profile.vendorInfo?.businessType||"",onValueChange:e=>Re("profile.vendorInfo.businessType",e),children:[e.jsx(U,{children:e.jsx(F,{placeholder:"Select business type"})}),e.jsxs(T,{children:[e.jsx(A,{value:"real_estate_agent",children:"Real Estate Agent"}),e.jsx(A,{value:"property_developer",children:"Property Developer"}),e.jsx(A,{value:"construction_company",children:"Construction Company"}),e.jsx(A,{value:"interior_designer",children:"Interior Designer"}),e.jsx(A,{value:"legal_services",children:"Legal Services"}),e.jsx(A,{value:"home_loan_provider",children:"Home Loan Provider"}),e.jsx(A,{value:"packers_movers",children:"Packers & Movers"}),e.jsx(A,{value:"property_management",children:"Property Management"}),e.jsx(A,{value:"other",children:"Other"})]})]}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.businessType?te.profile.vendorInfo.businessType.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"experience",children:"Experience (Years)"}),c?e.jsx(w,{id:"experience",type:"number",value:te.profile.vendorInfo?.experience||0,onChange:e=>Re("profile.vendorInfo.experience",parseInt(e.target.value)||0)}):e.jsxs("p",{className:"text-sm",children:[te.profile.vendorInfo?.experience||0," years"]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"website",children:"Website"}),c?e.jsx(w,{id:"website",value:te.profile.vendorInfo?.website||"",onChange:e=>Re("profile.vendorInfo.website",e.target.value)}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.website||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"licenseNumber",children:"License Number"}),c?e.jsx(w,{id:"licenseNumber",value:te.profile.vendorInfo?.licenseNumber||"",onChange:e=>Re("profile.vendorInfo.licenseNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.licenseNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"gstNumber",children:"GST Number"}),c?e.jsx(w,{id:"gstNumber",value:te.profile.vendorInfo?.gstNumber||"",onChange:e=>Re("profile.vendorInfo.gstNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.gstNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"panNumber",children:"PAN Number"}),c?e.jsx(w,{id:"panNumber",value:te.profile.vendorInfo?.panNumber||"",onChange:e=>Re("profile.vendorInfo.panNumber",e.target.value)}):e.jsx("p",{className:"text-sm",children:te.profile.vendorInfo?.panNumber||"Not provided"})]})]})})]})}),e.jsxs(E,{value:"notifications",className:"space-y-6",children:[e.jsx(ee,{preferences:Ne.notifications,businessPreferences:{emailNotifications:Ne.business.emailNotifications,smsNotifications:Ne.business.smsNotifications,leadAlerts:Ne.business.leadAlerts,marketingEmails:Ne.business.marketingEmails,weeklyReports:Ne.business.weeklyReports},onChange:(e,s)=>Ce("notifications",e,s),onBusinessChange:(e,s)=>Ce("business",e,s),showTestButtons:!0,onTestPushNotification:()=>{f({title:"Test Push Notification",description:"Push notification test sent successfully!"})},onTestEmail:()=>{f({title:"Test Email",description:"Test email sent successfully!"})}}),e.jsxs(t,{className:"mb-6",children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password with secure OTP verification"})]}),e.jsxs(u,{variant:"outline",onClick:()=>we(!0),className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Change Password"]})]})})]}),e.jsx(_,{open:be,onOpenChange:we})]})]}),se.statistics&&e.jsxs(t,{children:[e.jsx(a,{children:e.jsxs(r,{className:"flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Performance Statistics"]})}),e.jsx(l,{children:e.jsxs("div",{className:`grid ${n?"grid-cols-2":"grid-cols-2 md:grid-cols-4"} gap-4`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(n?"text-xl":"text-2xl")+" font-bold text-blue-600",children:se.statistics.totalProperties}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(n?"text-xl":"text-2xl")+" font-bold text-green-600",children:se.statistics.totalValue||"???0"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(n?"text-xl":"text-2xl")+" font-bold text-purple-600",children:(te.profile.vendorInfo?.rating?.average||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:(n?"text-xl":"text-2xl")+" font-bold text-orange-600",children:se.statistics.totalMessages}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Messages"})]})]})})]})]})};export{se as default};
