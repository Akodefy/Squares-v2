const o="https://api.akodefy.com/api";async function c(t){const e=t.headers.get("content-type");if(!t.ok)if(e&&e.includes("application/json")){const a=await t.json().catch(()=>({message:`HTTP ${t.status}: ${t.statusText}`}));throw new Error(a.message||`HTTP ${t.status}: ${t.statusText}`)}else throw await t.text().catch(()=>""),new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`);if(!e||!e.includes("application/json"))throw new Error(`Invalid response format: Expected JSON but got ${e||"unknown"}`);return t.json()}async function r(t,e={}){const a=localStorage.getItem("token");let n;t.startsWith("http")?n=t:t.startsWith("/api")?n=`${o.replace("/api","")}${t}`:n=`${o}${t}`;const i={"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...e.headers};return fetch(n,{...e,headers:i})}export{r as f,c as h};
