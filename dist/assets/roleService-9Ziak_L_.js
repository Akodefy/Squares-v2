import{r as e,t}from"./index-Bu7cQZk6.js";const r=new class{baseUrl="https://api.buildhomemartsquares.com/api";async makeRequest(t,r={}){const s=`${this.baseUrl}${t}`,a={headers:{"Content-Type":"application/json",...r.headers},...r},o=e.getToken();o&&(a.headers={...a.headers,Authorization:`Bearer ${o}`});try{const e=await fetch(s,a);if(!e.ok){const t=await e.json().catch(()=>({success:!1,message:`HTTP ${e.status}: ${e.statusText}`}));throw new Error(t.message||"An error occurred")}return await e.json()}catch(i){throw i}}async getRoles(e={}){try{const t=new URLSearchParams;Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&t.append(e,String(r))});const r="/roles"+(t.toString()?`?${t.toString()}`:"");return await this.makeRequest(r)}catch(r){const e=r instanceof Error?r.message:"Failed to fetch roles";throw t({title:"Error",description:e,variant:"destructive"}),r}}async getRole(e){try{return await this.makeRequest(`/roles/${e}`)}catch(r){const e=r instanceof Error?r.message:"Failed to fetch role";throw t({title:"Error",description:e,variant:"destructive"}),r}}async getAdminRoles(){try{const e=await this.getRoles({limit:100}),t=e.data.roles.find(e=>"superadmin"===e.name.toLowerCase())||null;return{superAdmin:t,subAdmin:e.data.roles.find(e=>"subadmin"===e.name.toLowerCase())||null}}catch(e){return{superAdmin:null,subAdmin:null}}}async createRole(e){try{const r=await this.makeRequest("/roles",{method:"POST",body:JSON.stringify(e)});return t({title:"Success",description:"Role created successfully!"}),r}catch(r){const e=r instanceof Error?r.message:"Failed to create role";throw t({title:"Error",description:e,variant:"destructive"}),r}}async updateRole(e,r){try{const s=await this.makeRequest(`/roles/${e}`,{method:"PUT",body:JSON.stringify(r)});return t({title:"Success",description:"Role updated successfully!"}),s}catch(s){const e=s instanceof Error?s.message:"Failed to update role";throw t({title:"Error",description:e,variant:"destructive"}),s}}async deleteRole(e){try{await this.makeRequest(`/roles/${e}`,{method:"DELETE"}),t({title:"Success",description:"Role deleted successfully!"})}catch(r){const e=r instanceof Error?r.message:"Failed to delete role";throw t({title:"Error",description:e,variant:"destructive"}),r}}async toggleRoleStatus(e){try{const r=await this.makeRequest(`/roles/${e}/toggle-status`,{method:"PATCH"});return t({title:"Success",description:"Role status updated successfully!"}),r}catch(r){const e=r instanceof Error?r.message:"Failed to update role status";throw t({title:"Error",description:e,variant:"destructive"}),r}}async getPages(){try{return(await this.makeRequest("/roles/pages")).data.pages}catch(e){return[]}}formatPages(e){return e.length<=3?e.map(e=>e.replace(/_/g," ")).join(", "):`${e.slice(0,2).map(e=>e.replace(/_/g," ")).join(", ")} and ${e.length-2} more`}getRoleLevelVariant(e){return e>=8?"destructive":e>=5?"default":"secondary"}getRoleLevelText(e){return e>=8?"High":e>=5?"Medium":"Low"}};export{r};
